

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="发言人   00:00Now that you’ve learned about the 4 layer internet model, we’re going to focus on the network layer. This is the most important layer of the internet. In fact, to many people, it is the int">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络 004 The IP Service">
<meta property="og:url" content="http://example.com/2025/10/19/cs144-004/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="发言人   00:00Now that you’ve learned about the 4 layer internet model, we’re going to focus on the network layer. This is the most important layer of the internet. In fact, to many people, it is the int">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-19T02:00:03.000Z">
<meta property="article:modified_time" content="2025-10-19T11:37:07.027Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>计算机网络 004 The IP Service - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="计算机网络 004 The IP Service"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-19 10:00" pubdate>
          2025年10月19日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.9k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          41 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">计算机网络 004 The IP Service</h1>
            
            
              <div class="markdown-body">
                
                <p>发言人   00:00<br>Now that you’ve learned about the 4 layer internet model, we’re going to focus on the network layer. This is the most important layer of the internet. In fact, to many people, it is the internet. Whenever we use the internet, we’re required to use the Internet Protocol to send and receive our packets. You’ll remember that we say that each layer provides a service to the layer above. In order to correctly use a layer, we need a good understanding of the service that it provides. Therefore, in this video I’m going to walk through the service provided by the Internet Protocol.<br>既然你已经了解了4层互联网模型，我们将专注于网络层。这是互联网最重要的层面。事实上，对许多人来说，这就是互联网。每当我们使用互联网时，我们都需要使用互联网协议来发送和接收我们的数据包。你会记得我们说每一层都在上一层提供服务。为了正确使用一个层，我们需要很好地理解它所提供的服务。因此，在这个视频中，我将介绍互联网协议提供的服务。</p>
<p>发言人   00:31<br>IP datagrams consist of a header and some data When the transport layer has data to send, it hands a transport segment to the network layer. Below. The network layer puts the transport segment inside a new IP datagram that it creates. Ip’s job is to deliver the datagram to the other end of the internet, but first the IP datagram has to make make it over the first link to the first router, so IP sends the datagram to the link layer that puts it inside a link frame, such as an Ethernet packet, and then ships it off to the first router.<br>IP数据报由一个报头和一些数据组成，当传输层有数据要发送时，它会将一个传输段传递给网络层。在下面。网络层将传输段放入它创建的新IP数据报中。Ip的工作是将数据报传递到互联网的另一端，但首先IP数据报必须通过第一个链路到达第一个路由器，因此IP将数据报发送到链路层，链路层将数据报放在链接帧内，例如以太网数据包。然后将其运送到第一个路由器。</p>
<p>发言人   01:07<br>The IP service can be characterized by four properties listed here. It sends datagrams from end host to end host, it is unreliable but makes the best effort to deliver the datagrams, the network maintains no per flow state associated with the datagrams. Let’s take a look at each one of these in turn. As listed in the table, first IP is a datagram service when we ask IP to send some data for us, it creates a datagram and puts our data inside the datagram is a packet that is routed individually through the network based on the information in its header, in other words, the datagram itself contained. The header contains the IP address of the destination, which we abbreviate here as ipda for IP destination address and the forwarding decision at each router is based on this ipda the datagram header also contains an IP source address or IP essay saying where the packet came from, so the receiver knows where to send any response datagrams are routed hop by hop through the network from 1 router to the next, all the way from the IP source address to the IP destination address. We’ll learn more about how routers work later, but for now it’s enough to know that each router contains a forwarding table that tells it where to send packets next after it matches a given destination address. The router doesn’t know the whole path, it simply uses the destination address to index into its own forwarding table so that it can forward the packet to the next hop along the path towards its final destination hop bipo. Step by step, the packet makes its way from the source to the destination using only the destination address in the datagram.<br>可以通过此处列出的四个属性来描述IP服务。它将数据报从终端主机发送到终端主机，虽然不可靠，但会尽力传递数据报，网络不会维护与数据报关联的每个流状态。让我们依次看一下这些。如表中所列，第一个IP是数据报服务，当我们要求IP为我们发送一些数据时，它会创建一个数据报并将我们的数据放入数据报中，数据报是一个数据包，根据其标头中的信息通过网络单独路由，换句话说，包含的数据报本身。标头包含目标的IP地址，我们在这里缩写为ipda用于IP目标地址，每个路由器的转发决策都基于此ipda数据报标头还包含IP源地址或IP文章，说明数据包的来源。因此，接收方知道在哪里发送任何响应数据包是通过网络从一个路由器逐跳路由到下一个路由器，从IP源地址一直路由到IP目的地址。我们稍后会了解更多关于路由器如何工作的信息，但现在知道每个路由器包含一个转发表就足够了，该转发表会告诉它在与给定目的地址匹配后下一步向哪里发送数据包。路由器不知道整个路径，它只是使用目的地址索引到自己的转发表中，以便将数据包转发到通往其最终目的跳bipo的路径上的下一跳。一步一步地，数据包仅使用数据报中的目标地址从源到达目标。</p>
<p>发言人   02:49<br>You’ll often hear the analogy made between how IP datagrams are routed and how letters are routed by the Postal Service. It’s a good analogy. In the Postal Service, we put a letter into the mailbox with the address of the destination, and the letter is routed invisibly to us, hop by hop, from sorting office to sorting office until it reaches its destination. Neither sender or the receiver know or need to know the path taken by the letters in the Postal Service or by datagrams in the Internet. The IP service model provides a service which includes the routing to the destination.<br>你经常会听到IP数据报的路由方式和邮政服务的信件路由方式之间的类比。这是一个很好的比喻。在邮政服务中，我们将一封信放入带有目的地地址的邮箱，然后这封信就会被无形地路由给我们，从一个分拣办公室到另一个分拣办公室，直到它到达目的地。发送者或接收者都不知道或需要知道邮政服务中的信件或互联网中的数据报所采取的路径。IP服务模型提供包括路由到目标的服务。</p>
<p>发言人   03:26<br>The second aspect of the IP service model, and perhaps most surprisingly, is IP is unreliable. IP makes no promise that packets will be delivered to the destination. They could be delivered late, out of sequence, or never delivered at all. It’s possible that a packet will be duplicated along the way, for example by a misbehaving router.<br>IP服务模型的第二个方面，也许是最令人惊讶的是，IP不可靠。IP不保证数据包将被传送到目的地。它们可能会延迟交付、不按顺序交付或根本从未交付。一个数据包可能会在途中被复制，例如被一个行为不端的路由器复制。</p>
<p>发言人   03:46<br>The key thing to remember is that IP is unreliable and makes no guarantees, but it won’t drop datagrams arbitrarily just because it feels like it. That’s if you believe networks have feelings. IP does make the promise to only drop datagrams if necessary. For example, the packet queue in a router might fill up because of congestion, forcing the router to drop the next arriving packet IP won’t make any attempt to resend the data. In fact IP doesn’t even tell the source that the packet was dropped. Similarly, a faulty routing table might cause a packet to be sent to the wrong destination or cause a packet to be duplicated by mistake. IP doesn’t make any promises that these errors won’t happen, nor does it detect them when they do. But IP does make the promise to only make these errors and drop packets when necessary.<br>要记住的关键是，IP是不可靠的，不能保证，但它不会因为感觉像它而随意丢弃数据报。如果你相信网络是有感情的。IP承诺只在必要时丢弃数据报。例如，路由器中的数据包队列可能由于拥塞而填满，强制路由器丢弃下一个到达的数据包IP将不会尝试重新发送数据。实际上，IP甚至不会告诉来源数据包被丢弃了。同样，错误的路由表可能会导致数据包被发送到错误的目的地，或导致数据包被错误复制。IP没有承诺这些错误不会发生，也没有检测到它们。但IP确实承诺只会在必要时发出这些错误并丢弃数据包。</p>
<p>发言人   04:37<br>In fact, the IP datagram service is very much like the basic postal service. The basic postal service makes no promise that our letters will be delivered on time or that if we send two or three letters back to back on consecutive days, that they’ll be received in the order they were sent. And it makes no promise they’ll be delivered at all unless we pay for a more expensive end to end service to guarantee delivery. Really, when it comes down to it IP is an extremely simple, minimal service. It maintains no state at all related to a communication. We say that a communication service is connectionless because it doesn’t start by establishing some end to end state associated with the communication. In other words, when we make a Skype call lasting several minutes and consisting of many IP datagrams, the IP layer maintains no knowledge of the call and simply route each datagram individually and independently of all the others.<br>事实上，IP数据报服务非常类似于基本的邮政服务。基本的邮政服务不承诺我们的信件会按时送达，也不承诺如果我们连续几天背靠背地发送两三封信，它们会按照发送的顺序被收到。它根本不承诺它们会被交付，除非我们支付更昂贵的端到端服务来保证交付。真的，归根结底，IP是一项非常简单、最小的服务。它不维护与通信相关的任何状态。我们说通信服务是无连接的，因为它不是从建立与通信相关的某种端到端状态开始的。换句话说，当我们进行一个持续几分钟并且由许多IP数据报组成的Skype呼叫时，IP层不知道该呼叫，而是单独地路由每个数据报，独立于所有其他数据报。</p>
<p>发言人   05:34<br>You might be wondering why the IP service is so simple. After all, it is the foundation of the entire internet. Every communication over the internet uses must use the IP service. Given how important the internet is, wouldn’t it have been better to make IP reliable? After all, we did say that most applications want a reliable byte communication service. There are several reasons.<br>你可能想知道为什么IP服务如此简单。毕竟，它是整个互联网的基础。每次通过互联网进行的通信都必须使用IP服务。考虑到互联网有多重要，让IP可靠不是更好吗？毕竟，我们确实说过大多数应用程序需要一个可靠的字节通信服务。有几个原因。</p>
<p>发言人   05:59<br>The IP service model was designed to be so simple. First, to keep the network simple, dumb, and minimal, faster, more streamlined, and lower cost to build and maintain. It was believed that if the network is kept simple with very few features and requirements, then packets could be delivered very quickly and at low cost to the destination. The thinking was that a simple network could be made to run very fast using dedicated hardware, and given that the network is implemented by a large number of routers scatter’d throughout the network across the world, if they could be kept simple, then they are more likely to be reliable, more affordable, easier to maintain, and will need to be upgraded less often.<br>IP服务模型被设计得非常简单。首先，保持网络简单、哑、最小化、更快、更精简、更低的构建和维护成本。人们相信，如果网络保持简单，具有很少的功能和要求，那么数据包可以非常快速且低成本地发送到目的地。他们的想法是，一个简单的网络可以使用专用硬件来快速运行，并且考虑到网络是由分布在全球网络中的大量路由器实现的，如果它们可以保持简单，那么它们更有可能是可靠的，更实惠。更容易维护，并且需要较少升级。</p>
<p>发言人   06:45<br>Second is the end to end principle. The end to end principle states that, where possible, implement features in the end hosts in the design of communication systems such as the internet. There’s a well beknown principle called the end to end principle that says if you can correctly implement features at the endpoints, then you should. We’ll study the end to end principle in more depth in later videos. But the basic idea is to place as much intelligence as possible at the endpoints, in our case, the source and destination computers. This can have several advantages, such as making sure the feature is implemented correctly for the application and it’s easier to evolve and improve a feature if it’s implemented in software on incomputable rather than baked into the hardware of the Internet.<br>第二个是端到端的原则。端到端的原则规定，在可能的情况下，在通信系统 (如互联网) 的设计中实现终端主机的功能。有一个众所周知的原则，称为端到端原则，即如果您能够在端点正确实现功能，那么您应该。在后面的视频中，我们将更深入地研究端到端的原则。但基本思想是将尽可能多的情报放在端点，在我们的情况下，是源计算机和目标计算机。这可以有几个优点，例如确保功能为应用程序正确实现，并且如果在不计算的软件中实现而不是嵌入到互联网的硬件中，则更容易发展和改进功能。</p>
<p>发言人   07:31<br>In the case of the Internet, it was decided that features such as reliable communications and controlling congestion should be done at the endpoints by the source and destination computers and not by the network. At the time, it was quite a radical suggestion and very, very different design choice from the telephone system. The largest existing network at the time, which was originally built on the idea of simple handsets and a complicated feature rich network of telephone switches.<br>在互联网的情况下，决定诸如可靠通信和控制拥塞等功能应该在源计算机和目标计算机而不是网络的端点完成。当时，这是一个相当激进的建议，设计选择与电话系统非常不同。当时最大的现有网络，最初建立在简单手机和复杂功能丰富的电话交换机网络的基础上。</p>
<p>发言人   07:56<br>In later videos, we’ll be studying the end to end principles as one of the important architectural principles of communication systems. We’ll see many examples of the end to end principle in action, For example, when we study the transport layer, we’ll see how the end hosts build a reliable communication service over the unreliable IP network service. A simple IP service also allows a variety of reliable or unreliable services to be built on top. If IP was reliable, in other words, if any missing packets were retransmitted automatically, then it would not be ideal for some services. For example, in real time applications like a video chat, there might be no point in retransmitting lost data because it might arrive too late to be useful. Instead, the application might choose to show a few blank pixels or use the pixels from the frame before by not providing any reliability guarantees, IP letsgo application choose the reliability service it needs.<br>在后面的视频中，我们将研究端到端的原则，作为通信系统重要的架构原则之一。我们将看到许多端到端原则在实践中的例子，例如，当我们研究传输层时，我们将看到终端主机如何在不可靠的IP网络服务上构建可靠的通信服务。简单的IP服务还允许在其上构建各种可靠或不可靠的服务。如果IP是可靠的，换句话说，如果任何丢失的数据包被自动重传，那么对某些服务来说就不是理想的选择。例如，在视频聊天等实时应用程序中，重新传输丢失的数据可能没有意义，因为它可能来不及有用。相反，应用程序可能会选择显示一些空白像素或使用之前帧中的像素，而不提供任何可靠性保证，IP letsgo应用程序会选择所需的可靠性服务。</p>
<p>发言人   09:03<br>Finally IP works over any link layer IP makes very few assumptions about the link layer. IP makes very little expectation at all of the link layer below the link could be wired or wireless and requires no retransmission or control of congestion. Some people have said IP is so simple and make so few assumptions about the underlying lick layer that you could run IP over carrier pigeons. In fact, there’s even an internet standard at telling you how to do it. Making IP run over any link layer made sense because the internet was created specifically to interconnect existing networks. In fact, that’s why it was called the internet.<br>最后，IP可以在任何链路层上工作，IP对链路层的假设非常少。IP几乎没有对链接下面的链路层的期望，链接可以是有线或无线的，不需要重传或控制拥塞。有些人说IP非常简单，对底层的舔层几乎没有假设，以至于你可以在信鸽上运行IP。事实上，甚至有一个互联网标准可以告诉你如何做。使IP在任何链路层上运行都变得感知，因为互联网是专门为互连现有网络而创建的。事实上，这就是为什么它被称为互联网。</p>
<p>发言人   09:43<br>In addition to the basic unreliable best effort, connectionless datagram service IP also provides a few other carefully chosen services. The designers of IP tried very hard to find a balance between providing the bare minimum needed to make communications work while not providing such a bare bone service that it doesn’t really work at all. I’m going to describe 5 features here, and you’ll learn about each one of these features in later videos. So I won’t go into a lot of details here, but I will briefly describe each one so you can understand the scope of the complete IP service.<br>除了基本的不可靠的最佳努力外，无连接数据报服务IP还提供其他一些精心选择的服务。IP的设计者非常努力地试图在提供通信工作所需的最低限度之间找到一个平衡，同时不提供这样一个根本不起作用的基本服务。我将在这里描述5个功能，您将在后面的视频中了解这些功能中的每一个。所以我不会在这里详细介绍，但我会简要描述每一个，这样你就可以了解完整IP服务的范围。</p>
<p>发言人   10:18<br>First IP tries to prevent packets from looping forever because IP routers forward packets hop by hop across the internet, it is possible for the forwarding table in a router to be wrong, causing a PO packet to start looping around and around following the same path. This is most likely to happen when the forwarding tables are changing and they temporarily get into an inconsistent state rather than try to prevent loops from ever happening, which would take a lot of complexity. IP uses a very simple mechanism to catch and then delete packets that appear to be stuck in a loop. To do this, IP simply adds a hop count field in the header of every datagram. It’s called the time to Live, or TL field, it starts out at a number like 128, and then it’s decremented by every router it passes through. If it reaches 0, IP concludes that it must be stuck in a loop, and the router drops the datagram. It’s a simple mechanism typical of IP. It doesn’t guarantee that loops won’t happen, it just tries to limit the damage caused by a flood of endlessly looping packets in the network.<br>第一个IP试图永远防止数据包循环，因为IP路由器在internet上逐跳地转发数据包，因此路由器中的转发表可能是错误的，导致采购订单数据包开始沿着相同的路径循环。这最有可能发生在转发表发生变化时，它们会暂时进入不一致的状态，而不是试图防止循环发生，这将需要很多复杂性。IP使用一种非常简单的机制来捕获并删除那些看起来卡在环路中的数据包。为此，IP只需在每个数据报的报头中添加一个跃点计数字段。它被称为生存时间，或TL字段，它从128这样的数字开始，然后通过每个路由器递减。如果数据报到达0，IP就会得出结论，它一定卡在了循环中，路由器会丢弃该数据报。这是典型的IP简单机制。它并不能保证不会发生循环，它只是试图限制网络中无休止循环数据包泛滥所造成的损害。</p>
<p>发言人   11:27<br>IP will fragment packets if they are too long. IP is designed to run over any kind of link. Most links have a limit on the size of the packets that they can carry. For example, ethernet can only carry packets shorter than 1500 B. If an application has more than 1500 B, descent has to be broken into 1500 B pieces before sending in an IP datagram. Now along the path towards the destination, a 100 B datagram might need to go over a link that can only carry smaller packets, let’s say 1000 bytes long. The router connecting the two links will fragment the data into two smaller datagrams. IP provides some header fields that we’ll see in a minute to help the router fragment the datagram into two self-scan tilled IP datagrams while providing the information the inho needs to correctly reassemble the data again.<br>如果数据包太长，IP将对其进行碎片处理。IP被设计为在任何类型的链接上运行。大多数链接对它们可以携带的数据包大小有限制。例如，以太网只能传输短于1500 B的数据包。如果应用程序具有超过1500个B，则在发送IP数据报之前，必须将下降分成1500个片段。现在沿着通往目的地的路径，一个100 B的数据报可能需要经过一个只能携带较小数据包的链接，比如说1000字节长。连接两条链路的路由器会将数据分成两个较小的数据报。IP提供了一些标头字段，我们将在一分钟内看到它们，以帮助路由器将数据报分成两个自扫描的IP数据报，同时提供inho再次正确重新组装数据所需的信息。</p>
<p>发言人   12:21<br>IP uses a header chisum to reduce the chances of delivering a datagram to the wrong destination. IP includes a checksum field in the datagram header to try and make sure that datagrams are delivered to the right location. It could be quite a security problem if packets are accidentally and frequently sent to the wrong place because of a mistake by a router along the way.<br>IP使用报头chisum来减少将数据报传递到错误目的地的机会。IP在数据报报头中包含一个校验和字段，以尝试确保数据报被传递到正确的位置。如果数据包由于路由器在途中的错误而被意外和频繁地发送到错误的地方，这可能是一个相当安全的问题。</p>
<p>发言人   12:45<br>Fourth, there are two versions of IP in use today. Ipv 4, which is used today by over 90% of end-hosts. It uses the 32 b addresses you’re probably familiar with because we’re running out of IP 4 addresses. The internet is in a gradual transition to Ipv 6, which uses 128 b addresses. Instead, you’ll be learning about the details of Ipv 4 and Ipv 6 in later videos.<br>第四，目前使用的IP有两个版本。Ipv 4目前被超过90% 的终端主机使用。它使用您可能熟悉的32 b地址，因为我们即将耗尽ip4地址。互联网正在逐步过渡到使用128个b地址的Ipv 6。相反，您将在后面的视频中了解Ipv 4和Ipv 6的详细信息。</p>
<p>发言人   13:12<br>Finally, IP allows new fields to be added to the datagram header. In practice, this is a bit of a mixed blessing. On the one hand, it allows new features to be added to the header that turn out to be important but weren’t in the original standard. On the other hand, these fields need processing and so require extra features in the routers along the path, breaking the goal of a simple D minimal forwarding path. In practice, very few options are used or processed by the routers.<br>最后，IP允许将新字段添加到数据报头中。实际上，这有点好坏参半。一方面，它允许将重要的新功能添加到标题中，但这些新功能不在原始标准中。另一方面，这些字段需要处理，因此需要在路由器沿着路径添加额外的功能，这打破了简单的最小转发路径的目标。在实践中，路由器使用或处理的选项非常少。</p>
<p>发言人   13:43<br>I’m now going to show you the Ipv 4 header and explain what all the fields do. I don, I don’t need you to remember where all the fields are. I don’t remember all the locations myself, but I do want you to know what each field does because it helps you understand, understand the scope of the IP service model. It should help cement your understanding and make it really clear that IP doesn’t do a lot. It’s a deliberately simple service.<br>我现在要向您展示Ipv 4标题并解释所有字段的作用。我不，我不需要你记住所有字段的位置。我自己不记得所有的位置，但我希望你知道每个字段的作用，因为这有助于你理解，理解IP服务模型的范围。它应该有助于巩固您的理解，并真正清楚地表明IP并没有做很多事情。这是一个故意简单的服务。</p>
<p>发言人   14:11<br>Here’s a picture of an Ipv 4 header, which is the most common header in use today. I’ve drawn it here in 32 b words with bit 0, the first to be sent under the wire up in the top left hand corner. The shaded portion is the Ipv 4 header. It’s followed by the data.<br>这是一张Ipv 4标头的图片，这是目前最常用的标头。我已经在这里画了32个单词，位0，第一个在左上角的电线下发送。阴影部分是Ipv 4标头。它后面跟着数据。</p>
<p>发言人   14:30<br>The most important fields in the IP header are the destination IP address, the source IP address, the protocol ID that tells us what’s inside the data field. Essentially, it allows the destination host to demultiplex arriving data, sending them to the correct code to process the packet. If the Pro Protocol I ID has the value 6, for example, then it tells us that the data contains a TCP segment, and so we can safely pass the datagram to the TCP code and it will be able to parse the segment correctly. The Internet assign numbers authority IAA defines over 140 different values of protocol ID representing different transport protocols. The version field tells us which version of IP we’re using. Currently, the legal values are Ipv 4 and Ipv 6. This header is an Ipv 4 header. We’ll see Ipv 6 headers in a later video.<br>IP报头中最重要的字段是目标IP地址、源IP地址以及告诉我们数据字段内内容的协议账号。本质上，它允许目标主机解复用到达的数据，将它们发送到正确的代码以处理数据包。例如，如果我账号的亲协议的值为6，那么它告诉我们数据包含一个TCP段，因此我们可以安全地将数据报传递给TCP代码，它将能够正确地解析该段。互联网分配号码机构IAA定义了超过140个不同的协议账号值，代表不同的传输协议。版本字段告诉我们我们正在使用哪个版本的IP。目前，合法价值是Ipv 4和Ipv 6。这个标头是一个Ipv 4标头。我们将在后面的视频中看到Ipv 6标题。</p>
<p>发言人   15:28<br>The total packet length can be up to 64 kB, including the header and all the data, the time to Live or TTL field helps us to prevent packets accidentally looping in the network forever. Every router is required to decrement the TTL field. If it reaches 0, the router should drop the packet this way when the source sends the packet with a fixed TTL value, it’s guaranteed to be destroyed by a router if it starts to travel in loops. Sometimes a packet is too long for the link. It is about to be sent on the packet. ID flags and fragment offset all help routers to fragment IP packets into smaller self-scan tilled datagrams. If need be. We will learn how fragmentation works in a later video.<br>总数据包长度可达64 kB，包括报头和所有数据，生存时间或TTL字段有助于我们永远防止数据包在网络中意外循环。每个路由器都需要减少TTL字段。如果数据包达到0，当源发送具有固定TTL值的数据包时，路由器应以这种方式丢弃数据包，如果它开始在循环中传播，则保证被路由器销毁。有时，数据包对于链路来说太长。它即将被发送到数据包中。账号标志和碎片偏移都有助于路由器将IP数据包分成更小的自扫描数据包。如果有必要的话。我们将在后面的视频中学习碎片化的工作原理。</p>
<p>发言人   16:17<br>The type of service field gives a hint to routers about how important this packet is. The header length tells us how big the header is. Some headers have optional extra fields to carry extra information. Finally, a checksum is calculated over the whole header, so just in case the header is corrupted, we’re not likely to deliver a packet to the wrong destination by mistake. So in summary IP is very important. We use it every time we send and receive packets in the internet.<br>服务字段的类型向路由器提示此数据包的重要性。标题长度告诉我们标题有多大。一些标题具有可选的额外字段以承载额外信息。最后，对整个报头计算校验和，因此万一报头损坏，我们不太可能错误地将数据包发送到错误的目的地。总之，IP非常重要。我们每次在互联网上发送和接收数据包时都会使用它。</p>
<p>发言人   16:49<br>IP provides a deliberately simple service. It is a simple, dumb, minimal service with four main features. It sends datagrams hop by hop across the internet. The service is unreliable and best effort, there’s no per-flow state making the protocol connectionless. At this point.<br>IP提供了一种特意设计的简单服务。这是一个简单、愚蠢、最小的服务，有四个主要特点。它通过互联网逐跳发送数据报。服务不可靠且尽力服务，没有每个流的状态使协议无连接。在这一点上。</p>
<p>发言人   17:07<br>You should feel comfortable with what the IP protocol is, what its service model is, and how it fits into the internet for layer hierarchy. If you have doubts, I suggest you rewatch this video and the one before it. On the 4 layer model. You’ll also find lots of good references about how Ipv 4 works. Any good networking textbook will devote considerable space to explaining what IP is and why it was designed this way. For example, chapter 4 of the sixth edition of Computer Networking, a top down approach by Corsi and Ross. You’ll also find a brief explanation on Wikipedia.<br>你应该对IP协议是什么，它的服务模型是什么，以及它如何适应互联网的层次结构感到舒适。如果您有疑问，我建议您重新观看此视频和之前的视频。在4层模型上。你还会找到很多关于Ipv 4如何工作的很好的参考资料。任何一本好的网络教科书都会花相当多的空间来解释IP是什么以及为什么它是这样设计的。例如，第六版的《计算机网络》第四章，是Corsi和Ross采用的自上而下的方法。您还可以在维基百科上找到简要解释。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>计算机网络 004 The IP Service</div>
      <div>http://example.com/2025/10/19/cs144-004/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月19日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/19/cs144-005/" title="计算机网络 005 The life of a Packet">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">计算机网络 005 The life of a Packet</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/19/cs144-003/" title="计算机网络 003 The four layer Internet model">
                        <span class="hidden-mobile">计算机网络 003 The four layer Internet model</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
