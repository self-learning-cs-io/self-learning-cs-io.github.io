

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="发言人   00:00In this video, you’re going to be learning about TCP, the transmission control protocol, which is used by over 95% of all internet applications. TCP is almost universally used because it pr">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络 016 The TCP Service Model">
<meta property="og:url" content="http://example.com/2025/10/19/cs144-016/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="发言人   00:00In this video, you’re going to be learning about TCP, the transmission control protocol, which is used by over 95% of all internet applications. TCP is almost universally used because it pr">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-19T02:00:15.000Z">
<meta property="article:modified_time" content="2025-10-19T12:33:03.223Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>计算机网络 016 The TCP Service Model - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="计算机网络 016 The TCP Service Model"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-19 10:00" pubdate>
          2025年10月19日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.2k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          35 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">计算机网络 016 The TCP Service Model</h1>
            
            
              <div class="markdown-body">
                
                <p>发言人   00:00<br>In this video, you’re going to be learning about TCP, the transmission control protocol, which is used by over 95% of all internet applications. TCP is almost universally used because it provides the reliable end to end bidirectional byte stream service that almost all applications want. TCP is an example of the transport layer. When an application calls TCP, it hands it some bytes that it once delivered to the other end. TCP places these bytes into a TCP segment and then takes it from there. TCP hands the segments to the IP layer, which encapsulates it into an IP datagram. The IP addresses are added, the IP datagram is handed in turn to the link layer, which builds the link frame, adds the link address, for example, the Ethernet addresses, and then it sends it onto the wire.<br>在本视频中，您将学习TCP，这是超过95% 的互联网应用程序使用的传输控制协议。TCP几乎被普遍使用，因为它提供了几乎所有应用程序都想要的可靠的端到端双向字节流服务。TCP是传输层的一个例子。当应用程序调用TCP时，它会把一些字节交给另一端。TCP将这些字节放入一个TCP段中，然后从那里获取它。TCP将这些段交给IP层，IP层将其封装成一个IP数据报。添加IP地址后，IP数据报依次移交给链路层，链路层构建链路帧，添加链接地址，例如以太网地址，然后将其发送到电线上。</p>
<p>发言人   00:50<br>When two applications use TCP, they establish a 200 way communication channel between the t.c.p.p. peers at both ends. First TCP establishes a communication channel from A to B, then it establishes the channel from B to A, we call the two way communication a connection at both ends of the connection. TCP keeps a state machine to keep track of how the connection is doing. We’ll see how the state machine works in a separate video.<br>当两个应用程序使用TCP时，它们在t.c.p.p.之间建立200路的通信通道。 两端的同龄人。首先，TCP从面向企业建立一个通信信道，然后它建立从B到a的信道，我们将双向通信称为连接两端的连接。TCP保持一个状态机来跟踪连接的运行情况。我们将在单独的视频中看到状态机的工作原理。</p>
<p>发言人   01:17<br>The TCP connection is established using a 300 way handshake between hosts A and B, first of all, host A sends a message to B indicating that the TCP layer at A wants to establish a connection with the TCP layer At B, the message is called a sin message s Yn, which is short for synchronize because A also sends along the base number it will use to identify bytes in the byte stream. If it sends 0, then the numbers will start at 0, if it sends 1000, then they will start at 1000 B responds with what we call a sin plus x b signals an x because B is acknowledging A’s request and agreeing to establish the communication from A to B, the TCP layer at B also sends a sin back to A to indicate that the TCP layer at B wants to establish a connection with the TCP layer at A, it sends a number two indicating the starting number for the byte stream in the reverse direction. Finally, A responds with an X to indicate that it is accepting the request for communication in the reverse direction. The connection is now set up in both directions. They’re now ready to start sending data to each other.<br>使用主机a和B之间的300次握手建立TCP连接，首先，主机A发送一条消息面向企业，指示A的TCP层想要与B的TCP层建立连接，该消息称为sin消息syn，这是 “同步” 的缩写，因为A也会沿着它将用于标识字节流中的字节的基数发送。如果发送0，数字将从0开始，如果发送1000，数字将从1000 b开始，然后响应我们所说的sin加上xb信号和x，因为B正在确认a的请求并同意与面向企业建立通信，位于B的TCP层也向a发送一个sin，以指示位于B的TCP层希望与位于A的TCP层建立连接，它发送一个数字2，指示反向字节流的起始编号。最后，A用X响应，表示它正在接受以相反方向进行通信的请求。现在已在两个方向上设置连接。他们现在已经准备好开始相互发送数据。</p>
<p>发言人   02:25<br>The host sends data to the hosts send data to each other as if it were from a continuous stream of bytes. Assume time is increasing from left to byte, and the stream of bytes next to A represents the bytes it wants to send to B, the stream of bytes might might exist in advance. For example, they are read from an HTML file describing a static web page, or it could be a stream being generated on the fly, for example from a video camera. By the way TCP sees it as a stream of bytes. Data from the application on A is delivered to the application at B, the TCP layers on A and B work together to make sure the stream of bytes is delivered correctly in order to the application. At B, the stream of bytes is delivered by TCP segments A puts bytes from the stream into a TCP segment, hands it to the IP layer, which delivers it to B, the TCP layer at B extracts the bytes to recreate the byte stream and delivers them to the application at B, in practice, the TCP segment may need to be transmitted multiple times in the case a segment is dropped along the way, or if A doesn’t receive an acknowledgement, the TCP segment could be as small as 1 B, for example, if you’re doing typing characters in an SSH session, each character is sent one at a time, rather than waiting for the whole segment to fill up, this isn’t very efficient when we have lots of data to send, so we can fill the TCP segment all the way up to a maximum IP datagram size when A and B have finished sending data to each other, they need to close the connection, we say they tear down the connection, which means they tell each other, they are closing the connection and both ends can clean up the state associated with the state machine, the TCP layer at host A can close the connection by sending a fin message, which is short for Fi. Host B acknowledges that A no longer has data to send and stops looking for new data from A, this closes down the data stream from A to B, but B might still have new data to send A and is not ready to close down the channel from B to A yet. So the message from B to A carrying the A can also carry new deep data from B to AB can keep sending new data to A as long as it needs to sometime later B finishes sending data A to A, and now sends its own thin to tell A, they can close the connection, host A replies by sending an act to acknowledge that the connection is now closed because both directions have finished, the connection is now fully closed and the state could be safely removed.<br>主机向主机发送数据，主机之间互相发送数据，就好像数据来自连续的字节流一样。假设时间从左面向企业字节递增，并且A旁边的字节流代表它想要发送的字节，面向企业字节流可能预先存在。例如，它们是从一个描述静态网页的HTML文件中读取的，或者它可以是一个动态生成的流，例如从摄像机中生成。顺便说一下，TCP将其视为字节流。来自A上应用程序的数据在B处传递到应用程序，在A和B上的TCP层协同工作，以确保字节流正确传递到应用程序。在B处，字节流由TCP段交付A将字节流放入TCP段，将其交给IP层，IP层面向企业交付，位于B处的TCP层提取字节以重新创建字节流并将其交付给B处的应用程序。在实践中，如果一个段被丢弃，或者如果a没有收到确认，则TCP段可能需要多次传输，例如，如果您在SSH会话中键入字符，每个字符一次发送一个，而不是等待整个段填满，当我们有大量数据要发送时，这不是很有效，因此，当a和B完成相互发送数据时，我们可以将TCP段一直填充到最大IP数据报大小，他们需要关闭连接，我们说他们断开连接，这意味着他们互相告诉，它们正在关闭连接，两端都可以清理与状态机关联的状态，主机A的TCP层可以通过发送fin消息来关闭连接，Fi是Fi的缩写。主机B确认A不再有数据要发送，并停止从A中查找新数据，这将关闭面向企业中的数据流，但是B可能仍有新数据要发送，并且还没有准备好关闭从B到A的通道。因此，从B到A的携带A的消息也可以从B到AB携带新的深层数据，只要需要，就可以继续向A发送新数据。稍后B完成将数据A发送到A，现在发送自己的thin来告诉A，他们可以关闭连接，通过发送一个动作来承载一个回复，确认连接现在已经关闭，因为两个方向都已经完成，连接现在已经完全关闭，状态可以安全地删除。</p>
<p>发言人   05:09<br>Here is a table summarizing the services provided by TCP the first three are services TCP provides to the application as we just saw it provides a reliable stream of bytes between 2 applications. TCP uses 4 mechanisms to make the communication reliable. In other words, to make sure the data is correctly delivered. When a TCP layer receives data, it sends an acknowledgement pack to the sender to let it know the data arrived correctly.<br>这里有一个表格总结了TCP提供的服务，前三个是TCP提供给应用程序的服务，正如我们刚刚看到的，它在两个应用程序之间提供了可靠的字节流。TCP使用4种机制来使通信可靠。换句话说，确保数据被正确传递。当TCP层收到数据时，它会向发送方发送一个确认包，让发送方知道数据正确到达。</p>
<p>发言人   05:40<br>Checksum Detect corrupted data The TCP header carries a checksum covering the header and the data inside the segment. The checksum is there to detect if the segment is corrupted along the way, for example by a bit error on the wire or by a memory fault inside a router. Sequence numbers detect missing data. Every segment’s header carries the sequence number in the stream of bytes of the first byte in the segment. For example, if the two sides agree that the sequence starts at 1000, then the first segment will have a sequence number of 1000. If the segment carries 500 B of data, then the next segment will carry the sequence number thousand 500. If a segment gets lost, then the sequence number will be incorrect and the TCP layer knows some data is missing, It is possible it will show up later. Perhaps it took a longer path where it might have gone missing, in which case the sender will need to resend the data.<br>校验和检测损坏的数据，TCP报头携带覆盖报头和数据段内数据的校验和。校验和用于检测数据段是否损坏，例如由于线路上的位错误或路由器内部的内存故障。序列号检测缺失数据。每个段的标头都在段中第一个字节的字节流中携带序列号。例如，如果双方同意序列从1000开始，那么第一段的序列号将为1000。如果一个段携带500 B的数据，那么下一个段将携带序列号1000 500。如果一个段丢失，那么序列号将不正确，并且TCP层知道一些数据丢失，它可能会在以后显示。也许它走了一条更长的路，可能会丢失，在这种情况下，发送者将需要重新发送数据。</p>
<p>发言人   06:37<br>Flow control prevents overrunning the receiver if host A is much faster than host B, then it’s possible for host A to completely overwhelm host AB by sending data so fast that host B can’t keep. TCP prevents this from happening using something we call flow control. In TCP, the receiver keeps telling the sender if it can keep sending. Specifically, it tells the sender how much room it has in its buffers to accept new data. If host B is falling behind, the space drops, possibly all the way to 0. When it has more room, it tells A and it can send more data. TCP delivers data to the application in the right sequence. In other words, whatever sequence the data was delivered from the application to TCP At Hosta, this is the same order in which it is sent from TCP to the application at B, if segments arrive at B out of order, the TCP layer resequence them to the correct order using the sequence number.<br>流量控制可以防止接收器溢出，如果主机A比主机B快得多，则主机A可能通过发送主机B无法保持的数据来完全压倒主机AB。TCP使用我们称之为流量控制的东西来防止这种情况发生。在TCP中，接收方一直告诉发送方是否可以继续发送。具体来说，它会告诉发送方在其缓冲区中有多少空间可以接受新数据。如果主机B落后，则空间会下降，可能会一直下降到0。当它有更多空间时，它会告诉用户并可以发送更多数据。TCP以正确的顺序向应用程序交付数据。换句话说，无论数据在Hosta从应用程序传递到TCP的顺序是什么，这与它从TCP发送到应用程序的顺序是一样的，如果段到达B的顺序不对，TCP层会使用序列号将它们重新排序到正确的顺序。</p>
<p>发言人   07:43<br>Finally TCP provides a surface to the whole network by controlling congestion. TCP tries to divide up the network capacity equally among all the TCP connections using the network. The congestion control mechanisms in TCP are very complicated and will devote the whole of unit 4 to studying congestion control.<br>最后，TCP通过控制拥塞为整个网络提供了一个表面。TCP尝试使用网络在所有TCP连接之间平均分配网络容量。TCP中的拥塞控制机制非常复杂，将致力于整个单元4研究拥塞控制。</p>
<p>发言人   08:06<br>The TCP segment header is much longer and more complicated than, say, the IP and Ethernet headers. That is because a TCP connection is reliable. In order to make the communication reliable, the two ends of the connection need to exchange more information so they know which bytes have arrived which are missing in the status of the connection. Here’s a quick summary of the most important fields in the TCP header. You don’t need to remember the layout of the header, but you should learn what each field does. If you need a reference I’d recommend Wikipedia or the Corrosion and Ross textbook.<br>TCP段报头比IP和以太网报头要长得多、复杂得多。这是因为TCP连接是可靠的。为了使通信可靠，连接的两端需要交换更多信息，以便他们知道哪些字节已经到达，哪些字节在连接状态中丢失。以下是TCP标头中最重要字段的快速摘要。你不需要记住标题的布局，但你应该学习每个字段的功能。如果你需要参考，我会推荐维基百科或者腐蚀和罗斯教科书。</p>
<p>发言人   08:40<br>The destination port tells the TCP layer which application the bytes should be delivered to at the other end, when a new connection starts up, the application tells TCP which serve to open a connection with. For example, if TCP is carrying web data, it uses port 80, which is the port number for TCP. You’ll learn more about port numbers later, but if you’re curious, you can look up the well-known port numbers at the Iana that is called IAA website.<br>目标端口告诉TCP层字节应该传递到另一端的应用程序，当新的连接启动时，应用程序告诉TCP要打开连接的服务。例如，如果TCP正在传输web数据，则它使用端口80，这是TCP的端口号。您将在稍后了解有关端口号的更多信息，但如果您好奇，可以在Iana (称为IAA网站) 上查找众所周知的端口号。</p>
<p>发言人   09:07<br>Search for Ayana port numbers. You’ll find thousands of port numbers defined for different well known services. For example, when we open a connection to an SSH server, we use destination port 22 for Smtp, the simple mail transfer protocol. We use port 23 using a well known port number letsos B identify the application it should establish the connection with. The source port tells the TCP layer at the other end which port it should use to send data back again. In our example, when host B replies to host A, it should place host a source port number in the destination port field so that hostage’s TCP layer can deliver the data to the correct application when a new applications. When a new connection starts, the initiator of the connection, in our case host A, generates a unique source port number to differentiate the connection from any other connections between host A and B to the same service.<br>搜索Ayana端口号。您会发现为不同的知名服务定义了数千个端口号。例如，当我们打开与SSH服务器的连接时，我们使用目标端口22进行简单邮件传输协议Smtp。我们使用端口23，使用一个众所周知的端口号，letsos B标识应该建立连接的应用程序。源端口告诉另一端的TCP层它应该使用哪个端口来再次发送数据。在我们的示例中，当主机B回复到主机A时，它应该在目标端口字段中放置一个源端口号，以便当有新的应用程序时，人质的TCP层可以将数据传送到正确的应用程序。当新连接开始时，连接的发起者 (在我们的例子中是主机a) 会生成一个唯一的源端口号，以区分该连接与主机A和B之间连接到同一服务的任何其他连接。</p>
<p>发言人   10:07<br>The sequence number indicates the position in the byte stream of the first byte in the TCP data field, for example, if the initial sequence number is 1000 and this is the first segment, then the sequence number is 1000. The acknowledgement sequence number tells the other end which byte we’re expecting next. It also says that we have successfully received every byte up until the one before this byte number. So, for example, if the acknowledgement sequence number is 751, it means we’ve received every byte up to and including byte 750. Notice that there are sequence numbers for both directions in every segment. This way TCP Pigg backs Ags on the data segments traveling in the other direction.<br>序列号表示TCP数据字段中第一个字节在字节流中的位置，例如，如果初始序列号是1000，这是第一段，则序列号是1000。确认序列号告诉另一端我们期待下一个字节。它还说我们已经成功接收了每个字节，直到这个字节数字之前的那个字节。因此，例如，如果确认序列号是751，这意味着我们已经收到了每个字节，包括字节750。请注意，每个段的两个方向都有序列号。通过这种方式，TCP Pigg会对朝另一个方向传输的数据段进行反向传输。</p>
<p>发言人   10:51<br>The 16 b checksum is calculated over the entire header and data and helps the receiver detect corrupt data. For example, bit errors on the wire or a faulty memory in a router. You’ll learn more about error detection and checksums in a later video.<br>16 b的校验和是在整个报头和数据上计算得出的，可帮助接收方检测损坏的数据。例如，线路上的位错误或路由器中的内存故障。你将在后面的视频中了解更多关于错误检测和校验和的知识。</p>
<p>发言人   11:08<br>The header length field, the one on the far left, tells us how long the TCP header is. The TCP options fields are, well, optional. They carry extra new header fields that were thought of and added after the TCP standard was created. The header length field tells us how many option fields are present, usually there are none.<br>报头长度字段，最左边的那个，告诉我们TCP报头有多长。TCP选项字段是可选的。它们带有额外的新标题字段，这些字段在TCP标准创建后被考虑和添加。标题长度字段告诉我们有多少个选项字段存在，通常没有。</p>
<p>发言人   11:30<br>Finally, there are a bunch of flags used to signal information from one end of the connection to the other. The A flag tells us that the Ackman sequence number is valid, and we’re acknowledging all of the data up until this point. The Syn flag tells us that we are signaling a synchronize, which is part of the three way handshake to set up a connection. And the fin flag signals the closing of one direction of the connection. Finally, the push flag Psh tells us the TCP layer at the other end to deliver the data immediately upon arrival rather than wait for more data. This is useful for sending short segments carrying time critical data such as a keystroke. We don’t want the TCP layer to wait to accumulate many keystrokes before delivering them to the application.<br>最后，还有一堆用于从连接的一端到另一端发出信息信号的标志。A标志告诉我们Ackman序列号是有效的，并且我们将确认到目前为止的所有数据。Syn标志告诉我们正在发送同步信号，这是建立连接的三次握手的一部分。并且fin标志表示连接的一个方向关闭。最后，推送标志Psh告诉我们另一端的TCP层在到达后立即交付数据，而不是等待更多数据。这对于发送包含时间关键数据 (如按键) 的短段非常有用。我们不希望TCP层在将它们交付给应用程序之前等待累积许多击键。</p>
<p>发言人   12:15<br>A TCP connection is uniquely identified by five pieces of information in the TCP and IP headers. The IP source and destination address uniquely identify the endpoints, and the IP protocol ID for TCP tells us the connection is TCP. The TCP source and destination ports identify the application processes on the end hosts together. At any instant, all five fields uniquely identify the TCP connection internet wide. Now, the unique ID only holds if a few things hold.<br>一个TCP连接由TCP和IP头中的五条信息唯一标识。IP源和目标地址唯一标识端点，并且TCP的IP协议账号告诉我们连接是TCP。TCP源端口和目标端口一起标识终端主机上的应用进程。在任何时刻，所有五个字段都唯一地标识internet范围内的TCP连接。现在，这种独特的账号只有在少数情况下才成立。</p>
<p>发言人   12:50<br>First, we need to make sure Host A, the initiator of the connection, picks a unique source port ID We need to make sure it doesn’t accidentally pick the same source port number it already used with another connection to the same service. On host B, host A uses a simple method to minimize the chances it increments the source port number for every new connection. The field is 16 b, so it takes 64K new connections before the new field the field wraps around. There’s also a very slight danger that if host A suddenly creates a lot of new connections to host B, it might still wrap around and try to create two connections with the same global ID. If this happened, the bytes from one connection might become confused with the bytes from another connection. This could happen, for example, if a TCP segment somehow lived for a very long time in the network, stuck inside a router buffer, or circulating in a temporary loop.<br>首先，我们需要确保主机A，连接的发起者，选择一个唯一的源端口，账号我们需要确保它不会意外地选择已经用于同一服务的另一个连接的同一个源端口号。在主机B上，主机A使用一种简单的方法来最小化它为每个新连接增加源端口号的机会。字段是16 b，因此在新的字段环绕之前需要64k个新连接。还有一个非常轻微的危险，如果主机a突然创建了很多到主机B的新连接，它可能仍然会环绕并尝试创建两个具有相同全局账号的连接。如果发生这种情况，来自一个连接的字节可能会与来自另一个连接的字节混淆。这可能发生，例如，如果一个TCP段以某种方式在网络中存在很长时间，卡在路由器缓冲区内，或在临时循环中循环。</p>
<p>发言人   13:46<br>To reduce the chances of confusion TCP connections initialize with a random initial sequence number to refer to bytes in the byte stream. While not totally foolproof, it does reduce the chances of confusion When host A initiates the connection to B, it includes the initial sequence number it will use in the stream of bytes from A to B when B replies and initiates the connection from B to A, it supplies its own sequence number. Initial sequence number from the stream of bytes from B to A. So to summarize how sequence numbers work, the sequence number in a segment from A to B includes the sequence number of the first byte offset by the initial sequence number. The acknowledgement sequence number in the segment from B back to A tells us which byte B is expecting next, offset by A’s initial sequence number.<br>为了减少混淆，使用随机初始序列号初始化TCP连接以引用字节流中的字节。虽然不是完全可靠的，但当主机A启动连接面向企业时，它确实减少了混淆的机会，它包括当B回复并启动从B到A的连接时，它将在面向企业的字节流中使用的初始序列号，它提供自己的序列号。从B到A的字节流的初始序列号。为了总结序列号的工作原理，面向企业段中的序列号包括初始序列号的第一个字节偏移量的序列号。从B回A段中的确认序列号告诉我们接下来期望哪个字节B，偏移量为A的初始序列号。</p>
<p>发言人   14:47<br>Let’s summarize how TCP port numbers work. Imagine the host that host B on the right offers two services, a web server and a mail server. When the web client, for example, a Chrome browser on host A, wants to request a page from the web server on B, it sends the data to TCP. We’ll assume TCP has already established a connection with B, so now it just needs to send the data. It creates a segment and uses destination port 80 to tell B it is requesting the data to be sent to the web server. Host A uses a locally generated source port number for B to use when sending data and adgs back again.<br>让我们总结一下TCP端口号的工作原理。想象一下右边的主机B提供两个服务，一个web服务器和一个邮件服务器。当web客户端 (例如，主机a上的Chrome浏览器) 想要从B上的web服务器请求页面时，它会将数据发送到TCP。我们假设TCP已经与B建立了连接，所以现在它只需要发送数据。它创建一个段并使用目标端口80告诉B它正在请求将数据发送到web服务器。主机A使用本地生成的源端口号，供B在再次发送数据和adgs时使用。</p>
<p>发言人   15:28<br>As usual, the TCP segment is encapsulated into an IP datagram and sent to be. The IP and TCP headers carry the unique ID of the TCP connection internet wide. When the IP datagram arrives at B, the TCP segment is removed. The TCP layer sees that the segment is for port 80 and sends the data to the web server, the TCP sliding window.<br>像往常一样，将TCP段封装到IP数据报中并发送。IP和TCP标头承载着互联网范围内TCP连接的唯一账号。当IP数据报到达B时，将删除TCP段。TCP层看到数据段是用于端口80的，并将数据发送到web服务器，TCP滑动窗口。</p>
<p>发言人   15:57<br>You’ll learn about other TCP features in upcoming videos. You’ll learn about window based flow control. To stop us from overwhelming the receiver. You’ll learn about retransmission and timeouts and different mechanisms to accomplish it. And you’ll learn about congestion control in unit 4. So in summary TCP provides in order reliable delivery of a stream of bytes between application processes.<br>您将在即将发布的视频中了解其他TCP功能。你将学习基于窗口的流量控制。以阻止我们压倒接收者。您将了解重传和超时以及完成它的不同机制。你将在第四单元学习拥塞控制。因此，总的来说，TCP提供了在应用程序进程之间可靠地传递字节流的功能。</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>计算机网络 016 The TCP Service Model</div>
      <div>http://example.com/2025/10/19/cs144-016/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月19日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/19/cs144-017/" title="计算机网络 017 The UDP Service Model">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">计算机网络 017 The UDP Service Model</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/19/cs144-015/" title="计算机网络 015 The Internet and IP Recap">
                        <span class="hidden-mobile">计算机网络 015 The Internet and IP Recap</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
