

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="100:00:00,000 –&gt; 00:00:07,000In this video, I’m going to continue the topic of the four layer internet model, and I’m going to tell you about the ICMP service model. 200:00:07,000 –&gt; 00:00:14,00">
<meta property="og:type" content="article">
<meta property="og:title" content="CS144 NetworkP252 3ICMPservicemodel">
<meta property="og:url" content="http://example.com/2025/10/23/CS144-networkP252-3ICMPservicemodel/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="100:00:00,000 –&gt; 00:00:07,000In this video, I’m going to continue the topic of the four layer internet model, and I’m going to tell you about the ICMP service model. 200:00:07,000 –&gt; 00:00:14,00">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-23T14:13:16.943Z">
<meta property="article:modified_time" content="2025-10-23T14:13:54.947Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>CS144 NetworkP252 3ICMPservicemodel - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="CS144 NetworkP252 3ICMPservicemodel"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-23 22:13" pubdate>
          2025年10月23日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          505 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          5 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">CS144 NetworkP252 3ICMPservicemodel</h1>
            
            
              <div class="markdown-body">
                
                <p>1<br>00:00:00,000 –&gt; 00:00:07,000<br>In this video, I’m going to continue the topic of the four layer internet model, and I’m going to tell you about the ICMP service model.</p>
<p>2<br>00:00:07,000 –&gt; 00:00:14,000<br>ICMP is the Internet Control Message Protocol, and it’s used to report errors and diagnose problems with the NetWapLayer.</p>
<p>3<br>00:00:14,000 –&gt; 00:00:21,000<br>You’ll recall that IP doesn’t provide any guarantees about delivery, but it does help, and it will prove to be a very valuable tool,</p>
<p>4<br>00:00:21,000 –&gt; 00:00:28,000<br>to get some hints and some information back from the NetWapLayer to tell us about when things are going wrong.</p>
<p>5<br>00:00:28,000 –&gt; 00:00:32,000<br>There are three mechanisms that we use to make the NetWapLayer work in the Internet.</p>
<p>6<br>00:00:32,000 –&gt; 00:00:41,000<br>The first we’ve already seen is the Internet Protocol or IP. This creates IP data grams, and then delivers them hop-by-hop from end to end.</p>
<p>7<br>00:00:41,000 –&gt; 00:00:48,000<br>The second are the routing tables sitting inside the routers. There are algorithms that run to populate these router-forging tables,</p>
<p>8<br>00:00:48,000 –&gt; 00:00:53,000<br>so that the routers know how to deliver them hop-by-hop to the other end.</p>
<p>9<br>00:00:54,000 –&gt; 00:00:59,000<br>The third mechanism, which is the purpose of this video, is ICMP or the Internet Control Message Protocol.</p>
<p>10<br>00:00:59,000 –&gt; 00:01:05,000<br>ICMP helps communicate information about the NetWapLayer between the end hosts and the routers,</p>
<p>11<br>00:01:05,000 –&gt; 00:01:08,000<br>and I’m going to show you a couple of examples of those in a minute.</p>
<p>12<br>00:01:08,000 –&gt; 00:01:16,000<br>It’s typically used to report error conditions, and helps us diagnose problems, figure out the path taken by packets, and so on.</p>
<p>13<br>00:01:17,000 –&gt; 00:01:23,000<br>ICMP runs above the NetWapLayer, and so strictly speaking, it’s a transport layer protocol.</p>
<p>14<br>00:01:23,000 –&gt; 00:01:33,000<br>When an end host or router wants to report an error using ICMP, it puts the information that it wants to send back to the source into an ICMP payload,</p>
<p>15<br>00:01:33,000 –&gt; 00:01:38,000<br>and hands it to IP to be sent as a data gram.</p>
<p>16<br>00:01:39,000 –&gt; 00:01:52,000<br>Let’s look at an example. As I said, ICMP typically gets used as a method for error reporting, and in fact, you’ve seen it if you’ve ever seen the message destination network unreachable.</p>
<p>17<br>00:01:52,000 –&gt; 00:02:06,000<br>Let’s look an example. Imagine that I have a web client running as the application here, so I’ve got an HTTP or web client here that’s going to be accessing an HTTP server over here at B.</p>
<p>18<br>00:02:06,000 –&gt; 00:02:20,000<br>As we’ve seen before, the application bytes that for HTTP get put into the transport layer as usual into TCP, comes down to the NetWapLayer because that longer link comes up to the router along here.</p>
<p>19<br>00:02:20,000 –&gt; 00:02:29,000<br>Imagine that the address that is put in here is actually to a network that this router has no information about in its forwarding table.</p>
<p>20<br>00:02:29,000 –&gt; 00:02:35,000<br>Now this would be a pretty bad situation because that router doesn’t know how to forward the packet to be.</p>
<p>21<br>00:02:35,000 –&gt; 00:02:56,000<br>But if that happens, then the router will send back a message, and so this will come back down through the network to A, and it will say in it, destination network unreachable.</p>
<p>22<br>00:02:57,000 –&gt; 00:03:05,000<br>And that’s simply saying that it has no means to deliver that packet to be, so it’s alerting a by sending that back.</p>
<p>23<br>00:03:05,000 –&gt; 00:03:09,000<br>And we’ll see the format that it uses in a moment.</p>
<p>24<br>00:03:09,000 –&gt; 00:03:16,000<br>So basically the ICMP service model is very, very simple. It allows it to send a reporting message, a self-contained message, or reporting the error.</p>
<p>25<br>00:03:16,000 –&gt; 00:03:23,000<br>It’s unreliable in the sense that it sends a simple datagram. It doesn’t attempt to recent it. It doesn’t maintain any state of the messages that it sent.</p>
<p>26<br>00:03:23,000 –&gt; 00:03:29,000<br>It simply sends back a digest giving an indication of what the problem was.</p>
<p>27<br>00:03:29,000 –&gt; 00:03:33,000<br>And in fact, the word how it actually works is when a message comes in.</p>
<p>28<br>00:03:33,000 –&gt; 00:03:43,000<br>So for example, an IP datagram. So here is my IP datagram. Here is the header. Here is the payload or the data portion of my IP datagram.</p>
<p>29<br>00:03:43,000 –&gt; 00:03:50,000<br>So this is my IP datagram. Let’s say that this is just arrived, and in my previous example, this has arrived from A to the first router.</p>
<p>30<br>00:03:50,000 –&gt; 00:03:57,000<br>If the first router wants to send back an ICMP message, what it does is it takes the header.</p>
<p>31<br>00:03:57,000 –&gt; 00:04:09,000<br>Now this header here has source address A and destination address B. And it will populate this into, it will place this into an ICMP message.</p>
<p>32<br>00:04:09,000 –&gt; 00:04:18,000<br>So it will take this header and put it into the ICMP message. So this is my ICMP message.</p>
<p>33<br>00:04:18,000 –&gt; 00:04:27,000<br>And it will also take the first eight bytes of the IP payload. And it will put this into the ICMP message.</p>
<p>34<br>00:04:27,000 –&gt; 00:04:35,000<br>And then it marks it with a type and a code. And we’ll see some examples of these types and codes in a moment.</p>
<p>35<br>00:04:35,000 –&gt; 00:04:43,000<br>And then the whole lot gets placed into a new IP datagram. So this is the data of the new IP datagram.</p>
<p>36<br>00:04:43,000 –&gt; 00:04:51,000<br>And this is going to be sent back. So this is the header. And so the IP source will be the router.</p>
<p>37<br>00:04:51,000 –&gt; 00:05:02,000<br>So I’ll just put R for router. And the IP destination, in my example, will be A. It’s going to send it back to A to tell it that this was the error.</p>
<p>38<br>00:05:02,000 –&gt; 00:05:13,000<br>This is how it figures out what type of error it was. This was the data associated with that error. It’s the IP datagram that was originally causing the problem.</p>
<p>39<br>00:05:13,000 –&gt; 00:05:20,000<br>That’s all placed into the data of the IP datagram that goes back again to A.</p>
<p>40<br>00:05:20,000 –&gt; 00:05:28,000<br>There’s a good example of some particular ICMP message types. There are a lot of message types. This is just a sampling of them.</p>
<p>41<br>00:05:28,000 –&gt; 00:05:33,000<br>These are the six most important that we see. And you don’t need to remember the types or the codes.</p>
<p>42<br>00:05:33,000 –&gt; 00:05:41,000<br>You’ll find those in the internet, rfc792. And you can just look that up online if you want.</p>
<p>43<br>00:05:41,000 –&gt; 00:05:47,000<br>These are the ones that are most commonly used. And I’ll just go through examples. We’ve already seen the network unreachable.</p>
<p>44<br>00:05:47,000 –&gt; 00:05:55,000<br>This was type 3 code zero. And there are two other destination unreachable ones. Host unreachable. That’s if a…</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>CS144 NetworkP252 3ICMPservicemodel</div>
      <div>http://example.com/2025/10/23/CS144-networkP252-3ICMPservicemodel/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月23日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/23/CS144-networkP31-2ThefourlayerInternetmodel/" title="CS144 NetworkP31 2ThefourlayerInternetmodel">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">CS144 NetworkP31 2ThefourlayerInternetmodel</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/23/CS144-networkP262-4EndtoEndPrinciple/" title="CS144 NetworkP262 4EndtoEndPrinciple">
                        <span class="hidden-mobile">CS144 NetworkP262 4EndtoEndPrinciple</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
