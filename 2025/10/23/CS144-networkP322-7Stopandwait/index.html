

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="100:00:00,000 –&gt; 00:00:06,000This video is about flow control, one of the basic building blocks of reliable, efficient communication. 200:00:06,000 –&gt; 00:00:13,000Describes the basics of flow co">
<meta property="og:type" content="article">
<meta property="og:title" content="CS144 NetworkP322 7Stopandwait">
<meta property="og:url" content="http://example.com/2025/10/23/CS144-networkP322-7Stopandwait/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="100:00:00,000 –&gt; 00:00:06,000This video is about flow control, one of the basic building blocks of reliable, efficient communication. 200:00:06,000 –&gt; 00:00:13,000Describes the basics of flow co">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-23T14:13:16.945Z">
<meta property="article:modified_time" content="2025-10-23T14:13:54.950Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>CS144 NetworkP322 7Stopandwait - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="CS144 NetworkP322 7Stopandwait"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-23 22:13" pubdate>
          2025年10月23日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          740 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          7 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">CS144 NetworkP322 7Stopandwait</h1>
            
            
              <div class="markdown-body">
                
                <p>1<br>00:00:00,000 –&gt; 00:00:06,000<br>This video is about flow control, one of the basic building blocks of reliable, efficient communication.</p>
<p>2<br>00:00:06,000 –&gt; 00:00:13,000<br>Describes the basics of flow control, as well as its simplest implementation, something called the stop and wait protocol.</p>
<p>3<br>00:00:13,000 –&gt; 00:00:20,000<br>The basic problem flow control tries to solve is when a sender can send data faster than the receiver can process it.</p>
<p>4<br>00:00:20,000 –&gt; 00:00:27,000<br>So here we have a case where the sender A can send some 500,000 packets per second,</p>
<p>5<br>00:00:27,000 –&gt; 00:00:38,000<br>but the receiver B can only receive 200,000 packets per second. This might be because B has a slower processor, its networking card is good or whatever reason.</p>
<p>6<br>00:00:38,000 –&gt; 00:00:49,000<br>And so the issue is that if A sends data at this full rate of 500,000 packets per second, then 300,000 of those are going to have to be dropped at B.</p>
<p>7<br>00:00:49,000 –&gt; 00:00:58,000<br>That is B will not be able to process them, and so only 40% of the packets will come through. And so there’s a lot of wasted effort on A’s part, and it’s a lot of wasted effort in the network.</p>
<p>8<br>00:00:58,000 –&gt; 00:01:07,000<br>And it’s also going to completely saturate B’s. There’s no reason for A to be sending data faster than the rate of which B can receive it.</p>
<p>9<br>00:01:07,000 –&gt; 00:01:16,000<br>And so the basic approach the flow control takes is to make it that the sender doesn’t send packets faster than the receiver can process them.</p>
<p>10<br>00:01:16,000 –&gt; 00:01:26,000<br>And the way that usually works is the receiver gives the sender some kind of feedback, whether it’s implicit feedback or explicit, whether it’s slow down or speed up or to set a rate.</p>
<p>11<br>00:01:26,000 –&gt; 00:01:36,000<br>So two basic approaches used in most protocols today. The first stop and wait, talk about in this video, which is very simple, very simple and very simple fun and sting machine.</p>
<p>12<br>00:01:36,000 –&gt; 00:01:44,000<br>The second is what’s called sliding window, so talk about in a later video, which is a bit more complex, but can provide better performance.</p>
<p>13<br>00:01:44,000 –&gt; 00:01:54,000<br>So just a refresher on finite state machine diagrams. So when we draw a finite state machine of a protocol, we show the states that can enter here, state 1, state 2, state 3.</p>
<p>14<br>00:01:54,000 –&gt; 00:02:07,000<br>And then edges between the states have two pieces of information. First, the event that can cause a state transition on top and then below the action the protocol takes on making that state transition.</p>
<p>15<br>00:02:08,000 –&gt; 00:02:16,000<br>The stop and wait algorithm is very simple. It has at most one packet in flight at any time from the sender to the receiver.</p>
<p>16<br>00:02:16,000 –&gt; 00:02:22,000<br>So the basic algorithm is a sender sends one packet. It then waits for an acknowledgement from the receiver.</p>
<p>17<br>00:02:22,000 –&gt; 00:02:28,000<br>When it receives the acknowledgement, it then, if it has more data to send, sends another packet.</p>
<p>18<br>00:02:29,000 –&gt; 00:02:35,000<br>If it waits for some time and reaches a timeout and hasn’t heard an acknowledgement, then it assumes that the packet has been lost.</p>
<p>19<br>00:02:35,000 –&gt; 00:02:42,000<br>It has left the network, it has dropped on a router, it has dropped to the receiver, something happened, and where the acknowledgement was dropped.</p>
<p>20<br>00:02:42,000 –&gt; 00:02:49,000<br>And it resends the data. So there’s a timeout, which point it tries again. That’s the basic algorithm.</p>
<p>21<br>00:02:49,000 –&gt; 00:02:57,000<br>So the receiver has a one state finite state machine, which is wait for packets. When it receives new data, it sends an acknowledgement or a receiver.</p>
<p>22<br>00:02:57,000 –&gt; 00:03:06,000<br>It receives a data that sends an acknowledgement for that data. And if the data is new, it delivers that data to the application.</p>
<p>23<br>00:03:06,000 –&gt; 00:03:12,000<br>The sender finite state machine has two states. The first state, it’s waiting for data from the applications.</p>
<p>24<br>00:03:12,000 –&gt; 00:03:17,000<br>This is where it’s ready to send, but the data application is not yet provided to the send.</p>
<p>25<br>00:03:18,000 –&gt; 00:03:27,000<br>When the application calls send, the protocol sends a packet with that data, or as much as you can fit in a packet.</p>
<p>26<br>00:03:27,000 –&gt; 00:03:34,000<br>It then enters the wait for X state. In this state, there are two transitions. The first is, if it receives an acknowledgement.</p>
<p>27<br>00:03:34,000 –&gt; 00:03:41,000<br>If the protocol receives an acknowledgement, then it does nothing and goes back to wait for data. If there’s more data to send, it’ll send new data.</p>
<p>28<br>00:03:41,000 –&gt; 00:03:45,000<br>Or if there’s no more data to send, it’ll wait until the software calls send.</p>
<p>29<br>00:03:45,000 –&gt; 00:03:52,000<br>The second transition is when it’s a timeout. This is the case where it has sent a packet of data, but it hasn’t received the acknowledgement.</p>
<p>30<br>00:03:52,000 –&gt; 00:03:56,000<br>It’s waiting and it’s waiting and it’s waiting and it times up. Then it just tries rescending.</p>
<p>31<br>00:03:56,000 –&gt; 00:04:02,000<br>So it wants to pick this timeout that it’s conservative. It’s pretty sure that the data or the subsequent acknowledgement has been lost.</p>
<p>32<br>00:04:02,000 –&gt; 00:04:06,000<br>So it only has one packet in the network at any time.</p>
<p>33<br>00:04:06,000 –&gt; 00:04:10,000<br>So that’s the basic stop and wait algorithm. So here are four sample executions.</p>
<p>34<br>00:04:10,000 –&gt; 00:04:19,000<br>The first is when there’s no loss. Everything works perfectly. The sender sends its data. They receive a receive it, sends acknowledgement.</p>
<p>35<br>00:04:19,000 –&gt; 00:04:23,000<br>And now the sender, if it had more data, it could send more.</p>
<p>36<br>00:04:23,000 –&gt; 00:04:28,000<br>The second case, data is lost. Now the sender sends data. It’s lost in the network.</p>
<p>37<br>00:04:28,000 –&gt; 00:04:38,000<br>So the sender times out and tries rescending the data. So it’s sitting in that waiting for X state. The timeout hits and it rescends.</p>
<p>38<br>00:04:39,000 –&gt; 00:04:45,000<br>Here’s a third case where the data is successfully delivered, but the acknowledgement is lost.</p>
<p>39<br>00:04:45,000 –&gt; 00:04:50,000<br>It’s now the sender is in the wait for X state. The time’s out. It rescends the data.</p>
<p>40<br>00:04:50,000 –&gt; 00:05:00,000<br>And then this causes the receiver to send a new acknowledgement, at which point then the sender gets the acknowledgement and continues as in the first case.</p>
<p>41<br>00:05:01,000 –&gt; 00:05:09,000<br>So the fourth case is a little more complicated. It actually shows a failure with the basic algorithm as I described before.</p>
<p>42<br>00:05:09,000 –&gt; 00:05:15,000<br>Which is the sender sends some data and the receiver sends an acknowledgement.</p>
<p>43<br>00:05:15,000 –&gt; 00:05:20,000<br>But let’s say something happens in the network. Suddenly the link becomes very slow or there’s a big cue somewhere in the network.</p>
<p>44<br>00:05:21,000 –&gt; 00:05:27,000<br>And the acknowledgement is delayed past the time of the timeout.</p>
<p>45<br>00:05:27,000 –&gt; 00:05:34,000<br>And so the sender sends some data and the acknowledgement comes. But the sender rescends the data before the acknowledgement arrives.</p>
<p>46<br>00:05:34,000 –&gt; 00:05:37,000<br>The acknowledgement that arrives very shortly.</p>
<p>47<br>00:05:37,000 –&gt; 00:05:44,000<br>And so now the sender knows that the data was acknowledged and it sends another data packet.</p>
<p>48<br>00:05:44,000 –&gt; 00:05:48,000<br>But let’s say that in fact this data packet is lost.</p>
<p>49<br>00:05:48,000 –&gt; 00:05:57,000<br>So now this first retransmission, this first retransmission of the first data packet arrives at the receiver. The receiver acknowledges it.</p>
<p>50<br>00:05:57,000 –&gt; 00:06:10,000<br>The sender doesn’t know whether this acknowledgement here, this act, is for the retransmission here of the data or it’s for the new data packet.</p>
<p>51<br>00:06:10,000 –&gt; 00:06:20,000<br>And so here we can have an error where if it assumes it was for the retransmission of the old data, it’s only used to keep track of that.</p>
<p>52<br>00:06:20,000 –&gt; 00:06:29,000<br>Something the finite state machines to keep track of. If it assumes it’s for the new data, that data might not have arrived. It could be assuming the data has arrived which hasn’t.</p>
<p>53<br>00:06:29,000 –&gt; 00:06:35,000<br>So this is a basic problem that comes up in any reliable protocol. It comes up in flow control.</p>
<p>54<br>00:06:35,000 –&gt; 00:06:44,000<br>Which is how do you detect duplicates? How do you know when acknowledgments are from retransmissions or duplicated copies of packets versus new data?</p>
<p>55<br>00:06:44,000 –&gt; 00:06:49,000<br>And so in the case of stop and wait, we can solve this problem with a one big counter.</p>
<p>56<br>00:06:49,000 –&gt; 00:06:54,000<br>And so the idea is that use this one big counter on all data acknowledgement and acknowledgement packets.</p>
<p>57<br>00:06:54,000 –&gt; 00:07:00,000<br>So a sender sends data zero, then it receives a Xero, data one, a one, data zero, a Xero.</p>
<p>58<br>00:07:00,000 –&gt; 00:07:05,000<br>And so now the receiver can tell if this is new data or duplicate.</p>
<p>59<br>00:07:05,000 –&gt; 00:07:15,000<br>And so in that prior case, I showed you be able to distinguish between the acknowledgement for the retransmission of packet zero and an acknowledgement for the first transmission of packet one.</p>
<p>60<br>00:07:15,000 –&gt; 00:07:21,000<br>Now a single bit counter makes a couple of simplifying assumptions. This doesn’t work all the time.</p>
<p>61<br>00:07:21,000 –&gt; 00:07:32,000<br>So what if a packet is delayed for many round trip times? It could be for example that this data zero is delayed all the way here.</p>
<p>62<br>00:07:32,000 –&gt; 00:07:39,000<br>And then the receiver acts it, but it turns out it’s actually just a copy of old data.</p>
<p>63<br>00:07:39,000 –&gt; 00:07:45,000<br>And so this particular one bit counter approach makes two simplifying assumptions.</p>
<p>64<br>00:07:45,000 –&gt; 00:07:50,000<br>First, the network isn’t duplicating packets itself. Second, the packets are not being delayed for multiple timeouts.</p>
<p>65<br>00:07:50,000 –&gt; 00:08:02,000<br>Now you can solve these problems by increasing the sequence number space, but for the simplifying assumptions to simple protocol operating environment, this one bit counter can help a lot.</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>CS144 NetworkP322 7Stopandwait</div>
      <div>http://example.com/2025/10/23/CS144-networkP322-7Stopandwait/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月23日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/23/CS144-networkP332-8Slidingwindow/" title="CS144 NetworkP332 8Slidingwindow">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">CS144 NetworkP332 8Slidingwindow</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/23/CS144-networkP342-9Reliablecomm/" title="CS144 NetworkP342 9Reliablecomm">
                        <span class="hidden-mobile">CS144 NetworkP342 9Reliablecomm</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
