

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="100:00:00,000 –&gt; 00:00:05,000This is the first of three videos about the domain name system or DNS. 200:00:05,000 –&gt; 00:00:08,000So let’s look at a URL for a second. 300:00:08,000 –&gt; 00:00:14">
<meta property="og:type" content="article">
<meta property="og:title" content="CS144 NetworkP795 8DNS1">
<meta property="og:url" content="http://example.com/2025/10/23/CS144-networkP795-8DNS1/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="100:00:00,000 –&gt; 00:00:05,000This is the first of three videos about the domain name system or DNS. 200:00:05,000 –&gt; 00:00:08,000So let’s look at a URL for a second. 300:00:08,000 –&gt; 00:00:14">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-23T14:13:16.957Z">
<meta property="article:modified_time" content="2025-10-23T14:13:54.955Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>CS144 NetworkP795 8DNS1 - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="CS144 NetworkP795 8DNS1"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-23 22:13" pubdate>
          2025年10月23日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          1.9k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          16 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">CS144 NetworkP795 8DNS1</h1>
            
            
              <div class="markdown-body">
                
                <p>1<br>00:00:00,000 –&gt; 00:00:05,000<br>This is the first of three videos about the domain name system or DNS.</p>
<p>2<br>00:00:05,000 –&gt; 00:00:08,000<br>So let’s look at a URL for a second.</p>
<p>3<br>00:00:08,000 –&gt; 00:00:14,000<br>If we look at a basic URL like you would put in your web browser, it has three basic parts.</p>
<p>4<br>00:00:14,000 –&gt; 00:00:18,000<br>It has first, at the front, the application protocol and port.</p>
<p>5<br>00:00:18,000 –&gt; 00:00:24,000<br>So this is saying that we’re going to be requesting a file over HTTP and by default,</p>
<p>6<br>00:00:24,000 –&gt; 00:00:27,000<br>that means port 80, TCP port 80.</p>
<p>7<br>00:00:27,000 –&gt; 00:00:33,000<br>You could also tell this URL after the host to be some other things, say port 1,001 or something,</p>
<p>8<br>00:00:33,000 –&gt; 00:00:36,000<br>but by default this means port 80.</p>
<p>9<br>00:00:36,000 –&gt; 00:00:39,000<br>The middle part of the name is specifying a host.</p>
<p>10<br>00:00:39,000 –&gt; 00:00:42,000<br>So in this case, cs144.scs.stantford.edu.</p>
<p>11<br>00:00:42,000 –&gt; 00:00:46,000<br>It’s a human readable name, delimited by periods and the four parts.</p>
<p>12<br>00:00:46,000 –&gt; 00:00:50,000<br>I mean, it’s specifying the actual node that we want to contact.</p>
<p>13<br>00:00:50,000 –&gt; 00:00:51,000<br>The last is then the file.</p>
<p>14<br>00:00:51,000 –&gt; 00:00:54,000<br>This is the application level for HTTP.</p>
<p>15<br>00:00:54,000 –&gt; 00:01:00,000<br>The application level specification of what file we want to request, HTTP.</p>
<p>16<br>00:01:00,000 –&gt; 00:01:05,000<br>And so the question is, so far we’ve been talking about the internet in terms of IP addresses,</p>
<p>17<br>00:01:05,000 –&gt; 00:01:07,000<br>usually IPv4 addresses.</p>
<p>18<br>00:01:07,000 –&gt; 00:01:14,000<br>When we type a URL, we have this human readable name describing the computer that will host through on a contact.</p>
<p>19<br>00:01:15,000 –&gt; 00:01:20,000<br>The question is, how do we translate this human readable name to an IP address?</p>
<p>20<br>00:01:20,000 –&gt; 00:01:25,000<br>Well, it turns out you can, of course, enter a URL without using a host name,</p>
<p>21<br>00:01:25,000 –&gt; 00:01:27,000<br>instead of just by entering the IP address.</p>
<p>22<br>00:01:27,000 –&gt; 00:01:37,000<br>So you could rather than typing cs144.scs.stantford.edu, you could actually write the IP address that’s associated with that name, if you’d like.</p>
<p>23<br>00:01:37,000 –&gt; 00:01:40,000<br>But these human readable names are very, very useful.</p>
<p>24<br>00:01:41,000 –&gt; 00:01:46,000<br>And people realize the human readable names are useful just from the beginnings of the internet.</p>
<p>25<br>00:01:46,000 –&gt; 00:01:51,000<br>And so way back when the internet was tiny, there was this file called host.txt,</p>
<p>26<br>00:01:51,000 –&gt; 00:01:56,000<br>and it turns out that every single host on the internet was in this file, host.txt,</p>
<p>27<br>00:01:56,000 –&gt; 00:01:59,000<br>and it was maintained by the network information center.</p>
<p>28<br>00:01:59,000 –&gt; 00:02:06,000<br>So it was maintained at SRI, so the SRINIC.ARPA, at this particular IP address.</p>
<p>29<br>00:02:06,000 –&gt; 00:02:10,000<br>So you go and read RSC952, it talks a bit about this.</p>
<p>30<br>00:02:10,000 –&gt; 00:02:17,000<br>And essentially, if you are a node on the internet, what you do is periodically contact this node at SRI,</p>
<p>31<br>00:02:17,000 –&gt; 00:02:20,000<br>and use a file transfer protocol to download a new version of it.</p>
<p>32<br>00:02:20,000 –&gt; 00:02:26,000<br>And this new version would have all the new hosts, and then you’d be able to map those host names to IP addresses.</p>
<p>33<br>00:02:26,000 –&gt; 00:02:31,000<br>Of course, if you don’t have too many hosts, this isn’t bad, but generally speaking,</p>
<p>34<br>00:02:31,000 –&gt; 00:02:34,000<br>the network capacity required by this scales of the end square,</p>
<p>35<br>00:02:34,000 –&gt; 00:02:38,000<br>and that periodically end nodes are going to across the file that’s ordered and in length.</p>
<p>36<br>00:02:38,000 –&gt; 00:02:42,000<br>So this was not seen as a scalable, good long-term solution.</p>
<p>37<br>00:02:42,000 –&gt; 00:02:49,000<br>It’s fine with us, there’s a couple of hosts, but as the internet grew, it quickly became a problem.</p>
<p>38<br>00:02:49,000 –&gt; 00:02:54,000<br>And this is what led to the birth of what’s called the domain name system, or DNS.</p>
<p>39<br>00:02:54,000 –&gt; 00:02:59,000<br>The basic problem DNS is trying to solve, the basic tasks trying to complete,</p>
<p>40<br>00:02:59,000 –&gt; 00:03:04,000<br>is to map names, human-related names, to addresses, or more generally these days to values.</p>
<p>41<br>00:03:04,000 –&gt; 00:03:08,000<br>Originally, this to map to IP addresses, it turns out nowadays you can do it for much more.</p>
<p>42<br>00:03:08,000 –&gt; 00:03:12,000<br>And there are a couple of design considerations for the domain name system.</p>
<p>43<br>00:03:12,000 –&gt; 00:03:16,000<br>The first is we like to be able to handle a huge number of records, right?</p>
<p>44<br>00:03:16,000 –&gt; 00:03:22,000<br>There are two to the 32 IP addresses, we should be able to map names in that kind of order.</p>
<p>45<br>00:03:22,000 –&gt; 00:03:25,000<br>Furthermore, we’d like to have distributed control.</p>
<p>46<br>00:03:25,000 –&gt; 00:03:29,000<br>One of the problems with host.tax is there’s the single centralized repository.</p>
<p>47<br>00:03:29,000 –&gt; 00:03:34,000<br>It should be that we can say this set of names you can manage, then this other set of names you can manage them.</p>
<p>48<br>00:03:34,000 –&gt; 00:03:42,000<br>So Stanford, you can manage names, understand for it, but Amazon, you can manage names under Amazon.</p>
<p>49<br>00:03:42,000 –&gt; 00:03:46,000<br>Furthermore, we’d like this system to be robust individual node failures.</p>
<p>50<br>00:03:46,000 –&gt; 00:03:50,000<br>It shouldn’t be that one node goes down, the entire domain name system comes down.</p>
<p>51<br>00:03:50,000 –&gt; 00:03:56,000<br>Because if that’s the case, then suddenly we can no longer map names to addresses and lots of things are going to hold.</p>
<p>52<br>00:03:56,000 –&gt; 00:03:59,000<br>So we want to be robust.</p>
<p>53<br>00:03:59,000 –&gt; 00:04:03,000<br>It’s this might seem like an amazingly challenging problem.</p>
<p>54<br>00:04:03,000 –&gt; 00:04:10,000<br>We want to handle billions of records, distribute it hierarchically across the entire internet, which is robust to failures.</p>
<p>55<br>00:04:10,000 –&gt; 00:04:15,000<br>But there are two things which turn out to make this problem tractable.</p>
<p>56<br>00:04:15,000 –&gt; 00:04:17,000<br>Make the design feasible.</p>
<p>57<br>00:04:18,000 –&gt; 00:04:25,000<br>The first is that this database that maps names to values is read only or read mostly and that there are updates to it.</p>
<p>58<br>00:04:25,000 –&gt; 00:04:29,000<br>But you generally expect that it is going to be read much more than it’s written.</p>
<p>59<br>00:04:29,000 –&gt; 00:04:36,000<br>It’s not like there are nodes coming in and out all the time, but nothing compared to the rate which we’re looking nodes up.</p>
<p>60<br>00:04:36,000 –&gt; 00:04:39,000<br>Furthermore, we don’t need perfect consistency.</p>
<p>61<br>00:04:39,000 –&gt; 00:04:41,000<br>You can also call loose consistency.</p>
<p>62<br>00:04:42,000 –&gt; 00:04:51,000<br>So if a node connects to the internet or if say a node a mapping between a name and an address changes, it’s okay if there’s some delay before everyone sees that.</p>
<p>63<br>00:04:51,000 –&gt; 00:04:56,000<br>It might be some people see it a little earlier than others, but it’s okay if there’s some delay.</p>
<p>64<br>00:04:56,000 –&gt; 00:05:08,000<br>And so it turns out that these two properties together that it’s a read mostly database and that it’s okay if things are slightly out of date, allows DNS to have extensive caching.</p>
<p>65<br>00:05:08,000 –&gt; 00:05:16,000<br>The idea is that once you have a result, you can hold on to it for a long time and then maybe when it expires, request a new result.</p>
<p>66<br>00:05:16,000 –&gt; 00:05:24,000<br>But rather than have one place say that has to be asked for everything, you can ask someplace once and then cash that result and answer it for other people.</p>
<p>67<br>00:05:24,000 –&gt; 00:05:31,000<br>So you can look up a name and then keep the result for a long time and then use it to answer other queries.</p>
<p>68<br>00:05:32,000 –&gt; 00:05:38,000<br>So recall that one of the requirements is that names be hierarchically administered that you can distribute the administration names.</p>
<p>69<br>00:05:38,000 –&gt; 00:05:43,000<br>And to accomplish that DNS uses a hierarchy of names and we’re all familiar with this.</p>
<p>70<br>00:05:43,000 –&gt; 00:05:49,000<br>So at the top, there’s implicitly what’s called dot or what’s called the root of the DNS name space.</p>
<p>71<br>00:05:49,000 –&gt; 00:05:53,000<br>It’s nothing. It’s a nothing, right? It’s an empty name.</p>
<p>72<br>00:05:53,000 –&gt; 00:05:55,000<br>So these are called the root servers, just dot.</p>
<p>73<br>00:05:56,000 –&gt; 00:06:05,000<br>The beneath them are what I call the top level domains, TLDs such as edu, comm, org, US, France, China.</p>
<p>74<br>00:06:05,000 –&gt; 00:06:15,000<br>Then underneath each of those top level domains, there are what we often think of as domain names, say stanford.edu or sysco.com or bidu.cn.</p>
<p>75<br>00:06:15,000 –&gt; 00:06:22,000<br>And of course within those domains, the owner of those domains can hand out additional names, additional domains.</p>
<p>76<br>00:06:23,000 –&gt; 00:06:27,000<br>So for example, stanford, generally there’s just one level of names below stanford.</p>
<p>77<br>00:06:27,000 –&gt; 00:06:33,000<br>So there’s cs.stanford.edu, dub dub dub.stanford.edu. Berkeley has another layer.</p>
<p>78<br>00:06:33,000 –&gt; 00:06:41,000<br>So there’s cs.berk, there’s the cs domain and then there are names underneath the cs domain like <a target="_blank" rel="noopener" href="http://www.cs.berk.edu/">www.cs.berk.edu</a>.</p>
<p>79<br>00:06:41,000 –&gt; 00:06:44,000<br>Similarly, google has maps dot google.com.</p>
<p>80<br>00:06:44,000 –&gt; 00:06:48,000<br>So now the way DNS servers work is that there is hierarchical zones.</p>
<p>81<br>00:06:48,000 –&gt; 00:06:53,000<br>There’s the root zone, then the TLDs, then the domains and then there can be subdomains.</p>
<p>82<br>00:06:53,000 –&gt; 00:07:00,000<br>So stanford for example, as you may have seen so far, it does have a subdomain scs, managed by David Mazier.</p>
<p>83<br>00:07:00,000 –&gt; 00:07:04,000<br>And the key thing is that each of these zones can be separately administered.</p>
<p>84<br>00:07:04,000 –&gt; 00:07:15,000<br>So stanford can grant David Mazier, the domain scs, so it’ll answer questions about scs, but then David can completely control all of the host names underneath scs.</p>
<p>85<br>00:07:15,000 –&gt; 00:07:24,000<br>Similarly, edu can grant stanford the name stanford, but then it’s completely up to stanford to manage all of the names beneath stanford.</p>
<p>86<br>00:07:24,000 –&gt; 00:07:28,000<br>For the word each zone can be served from several replicated servers.</p>
<p>87<br>00:07:28,000 –&gt; 00:07:34,000<br>And so rather than there’s being one server that serves stanford’s name, there are in fact many servers replicated.</p>
<p>88<br>00:07:34,000 –&gt; 00:07:36,000<br>And there’s some rules as to how they’re replicated.</p>
<p>89<br>00:07:36,000 –&gt; 00:07:42,000<br>The idea is that if one server goes down, there are others that can still answer questions about stanford.</p>
<p>90<br>00:07:42,000 –&gt; 00:07:48,000<br>So it turns out the root zone. So the zone you’d ask for, hey, who do I ask about edu?</p>
<p>91<br>00:07:48,000 –&gt; 00:07:53,000<br>There are 13 servers labeled A to M and they’re highly replicated.</p>
<p>92<br>00:07:53,000 –&gt; 00:08:01,000<br>And so there’s this bootstropping process of your computer comes up for the first time and wants to ask a name and it knows nothing.</p>
<p>93<br>00:08:01,000 –&gt; 00:08:08,000<br>Well, it needs to talk to a root server in order to contact say a top level domain server, but how does it find out the root servers?</p>
<p>94<br>00:08:08,000 –&gt; 00:08:13,000<br>It turns out these are generally just IPs that are stored in a file, in a name server.</p>
<p>95<br>00:08:13,000 –&gt; 00:08:19,000<br>The name server comes up and it has some IP addresses for root servers.</p>
<p>96<br>00:08:19,000 –&gt; 00:08:22,000<br>And then the first query that comes in, let’s say it’s for stanford.edu.</p>
<p>97<br>00:08:22,000 –&gt; 00:08:25,000<br>It knows that it needs to talk to the edu servers.</p>
<p>98<br>00:08:25,000 –&gt; 00:08:28,000<br>And so it can ask the root servers, hey, who has edu?</p>
<p>99<br>00:08:28,000 –&gt; 00:08:30,000<br>Then when it gets a response, who has edu?</p>
<p>100<br>00:08:30,000 –&gt; 00:08:33,000<br>It can contact the edu servers, hey, who has stanford?</p>
<p>101<br>00:08:33,000 –&gt; 00:08:39,000<br>In addition to having 13 different servers, they’re highly replicated through something called anycast.</p>
<p>102<br>00:08:39,000 –&gt; 00:08:47,000<br>IP anycast, where it turns out that there are many machines that have the same IP address, which basically causes you to contact the one that is closest to you.</p>
<p>103<br>00:08:47,000 –&gt; 00:08:50,000<br>So this makes the root servers highly, highly robust.</p>
<p>104<br>00:08:50,000 –&gt; 00:08:58,000<br>Often when you hear about large scale distributed denial of servers or DDoS attacks against the root servers,</p>
<p>105<br>00:08:59,000 –&gt; 00:09:01,000<br>this is exactly what they’re talking about.</p>
<p>106<br>00:09:01,000 –&gt; 00:09:08,000<br>The people are trying to attack the DNS root servers to prevent, to basically cause the DNS system to grind to a halt.</p>
<p>107<br>00:09:08,000 –&gt; 00:09:10,000<br>As of yet, nobody has yet succeeded.</p>
<p>108<br>00:09:10,000 –&gt; 00:09:14,000<br>There’s so many of these servers, they’re so robust and it turns out their job is so simple.</p>
<p>109<br>00:09:14,000 –&gt; 00:09:19,000<br>People haven’t been able to do it, but they keep on trying.</p>
<p>110<br>00:09:19,000 –&gt; 00:09:21,000<br>So here’s a map of the DNS root servers.</p>
<p>111<br>00:09:21,000 –&gt; 00:09:27,000<br>So A, B, C, D, E, F, G, H, R, J, K, L, L, J, J, K, L, M.</p>
<p>112<br>00:09:28,000 –&gt; 00:09:34,000<br>So here are all these different A servers, or A server, A, B, D, E, G, H, L.</p>
<p>113<br>00:09:34,000 –&gt; 00:09:41,000<br>And then for the anycast instances for C, F, I, J, K, M, you can see that they’re spread all over the world.</p>
<p>114<br>00:09:41,000 –&gt; 00:09:53,000<br>This means that if you’re somebody in, you know, we’re in, say, Saudi Arabia, and you want to issue a DNS server, you don’t have to go very far.</p>
<p>115<br>00:09:53,000 –&gt; 00:09:56,000<br>There’s some that are very close by.</p>
<p>116<br>00:09:59,000 –&gt; 00:10:06,000<br>Okay, so that’s the basic naming architecture and sort of a sense as to what DNS servers and how they’re structured these hierarchies.</p>
<p>117<br>00:10:06,000 –&gt; 00:10:09,000<br>So what does a query actually look like?</p>
<p>118<br>00:10:09,000 –&gt; 00:10:14,000<br>So there are two kinds of DNS queries, recursive and non-recursive.</p>
<p>119<br>00:10:15,000 –&gt; 00:10:24,000<br>Or recursive query asks the server you contact to sort of resolve the entire query.</p>
<p>120<br>00:10:24,000 –&gt; 00:10:30,000<br>So you’re asking it a question, and if there’s many steps to the question, then it should ask each of those steps.</p>
<p>121<br>00:10:30,000 –&gt; 00:10:36,000<br>As opposed to a non-recursive query, where you’re going to contact a server, just going to answer one step of the query.</p>
<p>122<br>00:10:36,000 –&gt; 00:10:39,000<br>And I’ll show you why this difference occurs in a second.</p>
<p>123<br>00:10:39,000 –&gt; 00:10:43,000<br>You specify just a bit in the query to say whether it’s a recursive or non-recursive query.</p>
<p>124<br>00:10:43,000 –&gt; 00:10:48,000<br>So DNS usually uses UDP port 53, and there’s a 512-by-message limit.</p>
<p>125<br>00:10:48,000 –&gt; 00:10:57,000<br>You can use TCP port 53, and then all the DNS messages have a 16-bit length field to sort of you know how long they are,</p>
<p>126<br>00:10:57,000 –&gt; 00:11:00,000<br>since they’re not diagrams, they’re a stream.</p>
<p>127<br>00:11:00,000 –&gt; 00:11:12,000<br>So let’s say that I’m a client, so here’s me, and I want to ask a question, hey, what is the IP address associated with <a target="_blank" rel="noopener" href="http://www.stamford.edu/">www.stamford.edu</a>?</p>
<p>128<br>00:11:12,000 –&gt; 00:11:22,000<br>So using DHCP, I have an address for a DNS server, and so let’s just, let’s call this here, Resolver, and so that’s some address R.</p>
<p>129<br>00:11:22,000 –&gt; 00:11:32,000<br>And so I send DNS request, or DNS query, saying, I need the IP address for <a target="_blank" rel="noopener" href="http://www.stamford.edu/">www.stamford.edu</a>, and I send this message to the Resolver.</p>
<p>130<br>00:11:32,000 –&gt; 00:11:42,000<br>I’m asking for address of <a target="_blank" rel="noopener" href="http://www.stamford.edu/">www.stamford.edu</a>.</p>
<p>131<br>00:11:42,000 –&gt; 00:11:50,000<br>And I ask this as a recursive query, so the Resolver is going to resolve this entire query recursively for me.</p>
<p>132<br>00:11:50,000 –&gt; 00:11:57,000<br>Well, let’s say my Resolver has nothing cash, it doesn’t know anything about the world, it just has the IP address of some root servers.</p>
<p>133<br>00:11:57,000 –&gt; 00:12:05,000<br>Well, the first thing that’s going to do is it needs to figure out who to ask a question about edu.</p>
<p>134<br>00:12:05,000 –&gt; 00:12:15,000<br>So who does, where are the servers for edu? So it sends a query to one of the root servers, saying, hey, who do I ask about edu?</p>
<p>135<br>00:12:15,000 –&gt; 00:12:21,000<br>This is a non-recursive query.</p>
<p>136<br>00:12:21,000 –&gt; 00:12:28,000<br>I can’t ask the root query, the root server is to answer the whole query for me and start contacting other people, there’s going to answer one step.</p>
<p>137<br>00:12:28,000 –&gt; 00:12:33,000<br>They’ll answer, hey, who should I talk to about edu?</p>
<p>138<br>00:12:33,000 –&gt; 00:12:39,000<br>And the root will send a response, saying, here’s some information for who you should talk about edu.</p>
<p>139<br>00:12:39,000 –&gt; 00:12:44,000<br>Now the Resolver knows, okay, now I have, I can cash the entry for edu.</p>
<p>140<br>00:12:44,000 –&gt; 00:12:48,000<br>Great, I can put it in my cash, this is the IP address I should contact if I have a question about edu.</p>
<p>141<br>00:12:48,000 –&gt; 00:12:51,000<br>Now let me contact that IP address.</p>
<p>142<br>00:12:51,000 –&gt; 00:12:57,000<br>And it’s going to ask edu, hey, who should I ask about Stanford?</p>
<p>143<br>00:12:57,000 –&gt; 00:12:59,000<br>Again, this is a non-recursive query.</p>
<p>144<br>00:12:59,000 –&gt; 00:13:09,000<br>The edu server, I’m going to say, okay, you hear some information about whom you should ask about Stanford.</p>
<p>145<br>00:13:09,000 –&gt; 00:13:16,000<br>I can then cash that result and ask that server, it’s the domain server.</p>
<p>146<br>00:13:16,000 –&gt; 00:13:22,000<br>So now I’m going to say, Stanford, what’s the address for WWW?</p>
<p>147<br>00:13:22,000 –&gt; 00:13:34,000<br>And Stanford can respond and say, aha, here’s the address for WWW.Standford.edu.</p>
<p>148<br>00:13:34,000 –&gt; 00:13:44,000<br>And then the Resolver can cash this result.</p>
<p>149<br>00:13:44,000 –&gt; 00:13:52,000<br>Now the Resolver can cash these values of, if I want to ask a question about edu, what DNS server should I talk to?</p>
<p>150<br>00:13:52,000 –&gt; 00:13:56,000<br>If I want to ask a question about Stanford.edu, what DNS server should I talk to?</p>
<p>151<br>00:13:56,000 –&gt; 00:14:01,000<br>And what’s the address for WWW.Standford.edu?</p>
<p>152<br>00:14:01,000 –&gt; 00:14:04,000<br>And then it can return this result to the client.</p>
<p>153<br>00:14:04,000 –&gt; 00:14:11,000<br>Here’s the IP address for WWW.Standford.edu.</p>
<p>154<br>00:14:11,000 –&gt; 00:14:15,000<br>And that’s the basic operation of a DNS query.</p>
<p>155<br>00:14:15,000 –&gt; 00:14:18,000<br>It starts with the client asking for the cursive query of the Resolver.</p>
<p>156<br>00:14:18,000 –&gt; 00:14:27,000<br>The Resolver may then ask non-recursive queries to servers in the network in order to generate the response which it then sends to the client.</p>
<p>157<br>00:14:27,000 –&gt; 00:14:31,000<br>It could also be that the Resolver had answered this question before.</p>
<p>158<br>00:14:31,000 –&gt; 00:14:35,000<br>And so rather than go and ask all these servers, just answered from its cash.</p>
<p>159<br>00:14:35,000 –&gt; 00:14:41,000<br>So if a couple minutes later another client asks the same question, hey, what’s the address of WWW.Standford.edu?</p>
<p>160<br>00:14:41,000 –&gt; 00:14:46,000<br>There’s Resolver rather than contact anyone, anyone can just return the cash result.</p>
<p>161<br>00:14:46,000 –&gt; 00:14:55,000<br>So if you have here in the noise about DNS, here in the news, not the noise about DNS cash poisoning,</p>
<p>162<br>00:14:55,000 –&gt; 00:15:01,000<br>there’s this aspect of DNS which is a tax, which is a try to take advantage of.</p>
<p>163<br>00:15:01,000 –&gt; 00:15:21,000<br>Which is that if you can get a bad record into the Resolver that somehow convinced it that WWW.Standford.edu actually points at <a target="_blank" rel="noopener" href="http://www.evil.com/">www.evil.com</a> or something such that if you try to go to Stanford instead of you go to some evil hackers server,</p>
<p>164<br>00:15:21,000 –&gt; 00:15:29,000<br>if you can get that cash entry into the Resolver and poison the cash, then anybody who asks that question is going to get that answer.</p>
<p>165<br>00:15:29,000 –&gt; 00:15:37,000<br>And so later on the course when we talk about security, we’ll see some of the ways in which that can happen and some ways in which DNS can solve it.</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>CS144 NetworkP795 8DNS1</div>
      <div>http://example.com/2025/10/23/CS144-networkP795-8DNS1/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月23日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/23/CS144-networkP785-7BitTorrent/" title="CS144 NetworkP785 7BitTorrent">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">CS144 NetworkP785 7BitTorrent</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/23/CS144-networkP805-9DNS2/" title="CS144 NetworkP805 9DNS2">
                        <span class="hidden-mobile">CS144 NetworkP805 9DNS2</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
