

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="100:00:00,000 –&gt; 00:00:05,000Today we’re going to talk about shortest path algorithm. 200:00:05,000 –&gt; 00:00:10,000This is another problem on graphs that’s very easy to state. 300:00:10,000 –&amp;gt">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2025/10/23/P78Part25-02_shortest-paths-apis/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="100:00:00,000 –&gt; 00:00:05,000Today we’re going to talk about shortest path algorithm. 200:00:05,000 –&gt; 00:00:10,000This is another problem on graphs that’s very easy to state. 300:00:10,000 –&amp;gt">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-23T14:29:08.693Z">
<meta property="article:modified_time" content="2025-10-23T14:31:18.594Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text=""></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-23 22:29" pubdate>
          2025年10月23日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          717 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          6 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header"></h1>
            
            
              <div class="markdown-body">
                
                <p>1<br>00:00:00,000 –&gt; 00:00:05,000<br>Today we’re going to talk about shortest path algorithm.</p>
<p>2<br>00:00:05,000 –&gt; 00:00:10,000<br>This is another problem on graphs that’s very easy to state.</p>
<p>3<br>00:00:10,000 –&gt; 00:00:14,000<br>We use again a slightly different graph model.</p>
<p>4<br>00:00:14,000 –&gt; 00:00:19,000<br>Last time we had educated graphs for computing minimum spanning trees.</p>
<p>5<br>00:00:19,000 –&gt; 00:00:23,000<br>Now we’re going to have educated directed graphs.</p>
<p>6<br>00:00:23,000 –&gt; 00:00:26,000<br>So now the edges are directed but they’re weighted.</p>
<p>7<br>00:00:26,000 –&gt; 00:00:33,000<br>And the problem that we’re going to be looking at is to find the shortest path from one vertex to another.</p>
<p>8<br>00:00:33,000 –&gt; 00:00:40,000<br>So in this example we’ve got a directed graph with a variety of edges, the directed edges.</p>
<p>9<br>00:00:40,000 –&gt; 00:00:49,000<br>And our goal is to find given two vertices, say 0 to 6, what’s the shortest path that takes us from 0 to 6?</p>
<p>10<br>00:00:49,000 –&gt; 00:00:51,000<br>Where the length of the path is the sum of its weights.</p>
<p>11<br>00:00:51,000 –&gt; 00:00:58,000<br>And in this case the shortest is from 0 to 2 to 7, 7 to 3 and 3 to 6.</p>
<p>12<br>00:00:58,000 –&gt; 00:01:03,000<br>Now the algorithms that we’re going to look at for this are classic algorithms.</p>
<p>13<br>00:01:03,000 –&gt; 00:01:15,000<br>And this is an example where years ago we would teach these algorithms and say, well they will be important someday when people have devices with maps on them and we’ll want to get around.</p>
<p>14<br>00:01:15,000 –&gt; 00:01:20,000<br>Nowadays of course everyone’s familiar with these kinds of devices.</p>
<p>15<br>00:01:20,000 –&gt; 00:01:30,000<br>When you have a map and you want to get from one place to another or you have a device in your car that gives you directions to get from one place to another.</p>
<p>16<br>00:01:30,000 –&gt; 00:01:36,000<br>These devices are implementing the classic algorithms that we’re going to talk about today.</p>
<p>17<br>00:01:36,000 –&gt; 00:01:44,000<br>Not only that and even more important shortest paths is a really interesting and important problem solving model.</p>
<p>18<br>00:01:44,000 –&gt; 00:01:51,000<br>There’s all kinds of important practical problems that can be recast as shortest paths problems.</p>
<p>19<br>00:01:51,000 –&gt; 00:02:03,000<br>And because we have efficient solutions to the shortest path, efficient algorithms for finding shortest paths, we have efficient solutions to all these kinds of problems.</p>
<p>20<br>00:02:03,000 –&gt; 00:02:13,000<br>All around us, from texture mapping to network routing protocols to pipelining, to trucks, to traffic planning.</p>
<p>21<br>00:02:13,000 –&gt; 00:02:23,000<br>We find shortest paths applications. And we’ll look at a couple surprising examples later on today.</p>
<p>22<br>00:02:23,000 –&gt; 00:02:33,000<br>So one thing to think about is let’s specify really what the problem is all about and there’s all different variants similar to many other problems we’ve studied.</p>
<p>23<br>00:02:33,000 –&gt; 00:02:45,000<br>One thing is what vertices are we talking about? So of course the most familiar is so-called source sync. What’s the shortest path from one vertex to another.</p>
<p>24<br>00:02:45,000 –&gt; 00:02:54,000<br>But actually more useful often is so-called single source shortest paths, which is all the paths from one vertex to every other.</p>
<p>25<br>00:02:54,000 –&gt; 00:03:00,000<br>And this is the one, for example, that the navigation system in your car might use.</p>
<p>26<br>00:03:00,000 –&gt; 00:03:06,000<br>The source is where you are and it’ll compute the shortest paths to every place else.</p>
<p>27<br>00:03:06,000 –&gt; 00:03:15,000<br>And then when you ask for someplace, it’ll just pick the one that you want. And a man are very similar to the API that we’re going to talk about.</p>
<p>28<br>00:03:15,000 –&gt; 00:03:32,000<br>Another thing that you might do if you didn’t have that many vertices is compute all pairs shortest paths. So pre-compute the paths between all pairs of vertices and then immediately be able to direct answer a client query.</p>
<p>29<br>00:03:32,000 –&gt; 00:03:37,000<br>This is the type of thing that was used on old maps, for example.</p>
<p>30<br>00:03:37,000 –&gt; 00:03:50,000<br>Another thing is the edge weights. Usually we think of it in terms of positive edge weights because the maps are geometric. And so the length of an edge is proportional to its distance in the plane.</p>
<p>31<br>00:03:50,000 –&gt; 00:04:05,000<br>But actually for many problems, there may be much more arbitrary. And actually one of the big issues that we’ll see is whether the edge weights are positive or negative.</p>
<p>32<br>00:04:05,000 –&gt; 00:04:11,000<br>And those types of restrictions are going to give rise to different types of algorithms.</p>
<p>33<br>00:04:11,000 –&gt; 00:04:21,000<br>Another issue that arises, and it’s particularly important in the presence of negative weights, as we’ll see at the end, is whether or not the graph has directed cycles.</p>
<p>34<br>00:04:21,000 –&gt; 00:04:28,000<br>And particularly whether the total length of a cycle is negative or not. And we’ll get to that at the end.</p>
<p>35<br>00:04:28,000 –&gt; 00:04:42,000<br>So, and also just to reduce some clutter in our code in the slides, we’ll throughout the lecture make the simplifying assumption that there are paths from the source to every vertex.</p>
<p>36<br>00:04:42,000 –&gt; 00:04:49,000<br>We won’t worry about driving to islands and other such issues.</p>
<p>37<br>00:04:49,000 –&gt; 00:04:59,000<br>To get started, we have to develop our APIs. And this will be straightforward after, because this is the fourth variation of a graph API that we’ve done.</p>
<p>38<br>00:04:59,000 –&gt; 00:05:09,000<br>We started with a regular undirected graphs, then we did digraphs, then we did weighted graphs, and now we’re doing weighted digraphs.</p>
<p>39<br>00:05:09,000 –&gt; 00:05:29,000<br>So, to begin, we’re going to need a API for processing edges. And this is actually simpler for digraphs than it was for undirected graphs, because we have this concept of one of the vertices is where the edge goes from and the other vertex is where it goes to.</p>
<p>40<br>00:05:29,000 –&gt; 00:05:41,000<br>So, we have a constructor that builds an edge from the vertex that’s given us first argument to the vertex that’s given us second argument. And then there’s a double list of the weight.</p>
<p>41<br>00:05:41,000 –&gt; 00:05:48,000<br>And then the client can ask for the from vertex or the two vertex or the weight or this is string representation.</p>
<p>42<br>00:05:48,000 –&gt; 00:06:01,000<br>And always in our code, we’ll use the idiom at the bottom of the slide for processing an edge. We’ll pick out v which is e dot from and w which is e dot two and then our code will process the nw.</p>
<p>43<br>00:06:01,000 –&gt; 00:06:16,000<br>The implementation of a weighted directed edge is very similar to the one for undirected graphs, but simpler, because the constructor simply sets the instance variables from its argument.</p>
<p>44<br>00:06:16,000 –&gt; 00:06:29,000<br>And from and two are simply get our method as is weight. So, that’s implementation of directed edge for directed weighted graphs.</p>
<p>45<br>00:06:29,000 –&gt; 00:06:49,000<br>So, now what about the graph itself? So, edge weighted digraph. So, as usual, we have a constructor that takes the number of vertices in the graph so it can build data structures that are vertex index arrays or we can read from an input stream.</p>
<p>46<br>00:06:49,000 –&gt; 00:07:05,000<br>And then the key methods are ad edge which takes an directed edge and adds it to the graph. And then the interval for adjacency lists which returns an interval of all the edges that point from a given vertex.</p>
<p>47<br>00:07:06,000 –&gt; 00:07:21,000<br>So, since we’re processing edges, we can have self loops and parallel edges and most of our code will simply use a dj method to iterate through the edges adjacent to vertices.</p>
<p>48<br>00:07:22,000 –&gt; 00:07:32,000<br>Representation is very similar to the other representations that we’ve seen except simpler because there’s only one representation of each edge.</p>
<p>49<br>00:07:32,000 –&gt; 00:07:49,000<br>So, there’s a verb, the instance variable for the adjacency list is a vertex index array. Each entry is a bag of directed edges actually references to directed edges.</p>
<p>50<br>00:07:50,000 –&gt; 00:08:00,000<br>So, all the code for building and processing this is very straightforward version of code that we’ve seen before.</p>
<p>51<br>00:08:00,000 –&gt; 00:08:15,000<br>Here’s the implementation for educated digraphs. It’s the same as our educated graph except we just replace graph with die graph everywhere.</p>
<p>52<br>00:08:16,000 –&gt; 00:08:27,000<br>And when we add an edge, we only add it to the from vertices adjacency list. So, vz.from edge v equals add the edge to that.</p>
<p>53<br>00:08:27,000 –&gt; 00:08:43,000<br>And then to get all the vertices adjacent to a given vertex, we just use the vertex index array to get its adjacency list and return that bag which is iterable so that the client can iterate through all those vertices.</p>
<p>54<br>00:08:44,000 –&gt; 00:08:50,000<br>Very straightforward version of what we did for educated graphs.</p>
<p>55<br>00:08:50,000 –&gt; 00:08:59,000<br>Okay, so now our client for that program is our single source shortest paths API.</p>
<p>56<br>00:09:00,000 –&gt; 00:09:10,000<br>And so, it works in a manner very similar to others that we’ve done. Now we’ll call it sp. The constructor takes a graph and a source vertex.</p>
<p>57<br>00:09:10,000 –&gt; 00:09:28,000<br>And it’ll go ahead and build the data structure. It’ll find the shortest paths from the s vertex to every other vertex in the graph and build the data structure so that it can efficiently answer client queries of first what’s the length of the shortest path from s to a given vertex.</p>
<p>58<br>00:09:29,000 –&gt; 00:09:38,000<br>And second, what’s the path given an iterable that gives the path from the source vertex from the source vertex to the given vertex.</p>
<p>59<br>00:09:38,000 –&gt; 00:09:51,000<br>So, this test client here will print out all the shortest paths from the given vertex s to every other vertex in the graph.</p>
<p>60<br>00:09:51,000 –&gt; 00:10:06,000<br>Go through all the vertices for every vertex. You print s to v in the distance from s to v. And then for every edge in the path, you simply print out the edge.</p>
<p>61<br>00:10:06,000 –&gt; 00:10:13,000<br>So, it’ll print for every vertex the distance from s to that vertex followed by the path.</p>
<p>62<br>00:10:13,000 –&gt; 00:10:27,000<br>So, for example, for the sample graph that we gave with vertex 0 as the source, it’ll print out the path from 0 to every vertex in the graph.</p>
<p>63<br>00:10:27,000 –&gt; 00:10:35,000<br>So, that’s a test client that we’ll use to make sure to check and learn the operation of our algorithms.</p>
<p>64<br>00:10:35,000 –&gt; 00:10:44,000<br>And this API is going to be effective even for huge graphs. So, that’s an introduction to our shortest path API.</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div></div>
      <div>http://example.com/2025/10/23/P78Part25-02_shortest-paths-apis/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月23日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/23/P81Part25-05_edge-weighted-dags/" title="">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile"></span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/23/P79Part25-03_shortest-path-properties/" title="">
                        <span class="hidden-mobile"></span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
