

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="100:00:00,000 –&gt; 00:00:09,060Hello again, in this video we’re going to wrap up our overview of Cool with one more example 200:00:09,060 –&gt; 00:00:18,320of writing a Cool program. 300:00:18,320 –&amp;">
<meta property="og:type" content="article">
<meta property="og:title" content="CS143 P6Week102 03 Cool Example Iii Final Correction">
<meta property="og:url" content="http://example.com/2025/10/25/CS143%20P6Week102-03-cool-example-iii-final-correction/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="100:00:00,000 –&gt; 00:00:09,060Hello again, in this video we’re going to wrap up our overview of Cool with one more example 200:00:09,060 –&gt; 00:00:18,320of writing a Cool program. 300:00:18,320 –&amp;">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-25T07:38:14.409Z">
<meta property="article:modified_time" content="2025-10-25T07:40:49.225Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>CS143 P6Week102 03 Cool Example Iii Final Correction - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="CS143 P6Week102 03 Cool Example Iii Final Correction"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-25 15:38" pubdate>
          2025年10月25日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          2.4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          20 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">CS143 P6Week102 03 Cool Example Iii Final Correction</h1>
            
            
              <div class="markdown-body">
                
                <p>1<br>00:00:00,000 –&gt; 00:00:09,060<br>Hello again, in this video we’re going to wrap up our overview of Cool with one more example</p>
<p>2<br>00:00:09,060 –&gt; 00:00:18,320<br>of writing a Cool program.</p>
<p>3<br>00:00:18,320 –&gt; 00:00:21,820<br>For our final example, let’s look at a program that actually manipulates some interesting</p>
<p>4<br>00:00:21,820 –&gt; 00:00:24,080<br>data structure.</p>
<p>5<br>00:00:24,079 –&gt; 00:00:32,739<br>So we’ll begin here by opening up a file and let’s call our program list.cll this time.</p>
<p>6<br>00:00:32,739 –&gt; 00:00:43,840<br>And as usual, we’ll begin by writing our main routine and our main method.</p>
<p>7<br>00:00:43,840 –&gt; 00:00:54,039<br>And once again, let’s make this inherit from I.O. so we can do the I.O. routines here.</p>
<p>8<br>00:00:55,039 –&gt; 00:00:59,879<br>And let’s just begin with something very simple, as always.</p>
<p>9<br>00:00:59,879 –&gt; 00:01:04,200<br>Let’s just have something that prints out hello world, but in a little bit of an unusual way.</p>
<p>10<br>00:01:04,200 –&gt; 00:01:09,400<br>We’re going to end up writing a list abstraction.</p>
<p>11<br>00:01:09,400 –&gt; 00:01:13,759<br>And let’s first build a list by hand or at least build the elements of a list by hand,</p>
<p>12<br>00:01:13,759 –&gt; 00:01:17,680<br>and then we’ll actually build a list abstraction and put them in a list.</p>
<p>13<br>00:01:17,680 –&gt; 00:01:26,680<br>So let’s have some strings.</p>
<p>14<br>00:01:26,680 –&gt; 00:01:30,680<br>So we’ll have our string hello, and this will also illustrate how you do multiple let</p>
<p>15<br>00:01:30,680 –&gt; 00:01:32,680<br>bindings simultaneously.</p>
<p>16<br>00:01:32,680 –&gt; 00:01:37,960<br>And I shouldn’t say simultaneously how you do multiple let bindings in one let expression.</p>
<p>17<br>00:01:37,960 –&gt; 00:01:40,480<br>So you do them by just listing them.</p>
<p>18<br>00:01:40,480 –&gt; 00:01:50,079<br>Notice that this uses commas as a separator rather than semicolons as a terminator.</p>
<p>19<br>00:01:50,079 –&gt; 00:01:55,480<br>So this let binding is going to define three names.</p>
<p>20<br>00:01:55,480 –&gt; 00:02:03,960<br>Hello world and new line, all of which are strings.</p>
<p>21<br>00:02:04,959 –&gt; 00:02:11,959<br>Then we’re going to print these out on the screen.</p>
<p>22<br>00:02:11,959 –&gt; 00:02:14,959<br>So we’re going to want to be able to do out string.</p>
<p>23<br>00:02:14,959 –&gt; 00:02:19,959<br>And since main inherits from self, we can do that without a without an object there,</p>
<p>24<br>00:02:19,959 –&gt; 00:02:22,959<br>because just again dispatches to the self object.</p>
<p>25<br>00:02:22,959 –&gt; 00:02:27,959<br>And we want to concatenate these strings together in the right order.</p>
<p>26<br>00:02:27,960 –&gt; 00:02:30,960<br>So we’ll do hello dot.</p>
<p>27<br>00:02:30,960 –&gt; 00:02:32,960<br>This is hello is always the string.</p>
<p>28<br>00:02:32,960 –&gt; 00:02:35,960<br>It can be concatenated to world and worlds of strings.</p>
<p>29<br>00:02:35,960 –&gt; 00:02:38,960<br>So it can be concatenated to new line.</p>
<p>30<br>00:02:38,960 –&gt; 00:02:41,960<br>And that should do the job.</p>
<p>31<br>00:02:41,960 –&gt; 00:02:46,960<br>And just to find one more thing about this let these let bindings here.</p>
<p>32<br>00:02:46,960 –&gt; 00:02:52,960<br>This knows that the commas comma is a separator here, meaning it doesn’t come after the last one on the list.</p>
<p>33<br>00:02:52,960 –&gt; 00:02:54,960<br>So it just separates items of the list.</p>
<p>34<br>00:02:54,960 –&gt; 00:02:56,960<br>It’s not a terminator.</p>
<p>35<br>00:02:56,960 –&gt; 00:03:01,960<br>It’s not we can close up our main procedure.</p>
<p>36<br>00:03:01,960 –&gt; 00:03:05,960<br>Close up our class definition.</p>
<p>37<br>00:03:05,960 –&gt; 00:03:06,960<br>Save it.</p>
<p>38<br>00:03:06,960 –&gt; 00:03:10,960<br>And now let’s see if it compiles.</p>
<p>39<br>00:03:10,960 –&gt; 00:03:11,960<br>Oh, amazing.</p>
<p>40<br>00:03:11,960 –&gt; 00:03:14,960<br>First try.</p>
<p>41<br>00:03:14,960 –&gt; 00:03:17,960<br>And we run it in a print solo world as expected.</p>
<p>42<br>00:03:17,960 –&gt; 00:03:23,960<br>So now let’s instead of introducing the three strings separately and they concatenate them together,</p>
<p>43<br>00:03:23,960 –&gt; 00:03:26,960<br>let’s write an abstraction where we can build a list of strings.</p>
<p>44<br>00:03:26,960 –&gt; 00:03:34,960<br>And then that abstraction will have a function within it to do the concatenation.</p>
<p>45<br>00:03:34,960 –&gt; 00:03:35,960<br>All right.</p>
<p>46<br>00:03:35,960 –&gt; 00:03:38,960<br>So we’ll have our class called list.</p>
<p>47<br>00:03:38,960 –&gt; 00:03:42,960<br>And every list needs to I think they have two components.</p>
<p>48<br>00:03:42,960 –&gt; 00:03:44,960<br>So first it’s going to have the item that’s in the list.</p>
<p>49<br>00:03:44,960 –&gt; 00:03:46,960<br>And that’ll be a string.</p>
<p>50<br>00:03:46,960 –&gt; 00:03:52,960<br>And then we have a pointer to the next to the to the tail of the list, to the rest of the list.</p>
<p>51<br>00:03:52,960 –&gt; 00:03:59,960<br>And so I’ll have a next field that points or is another list of strings.</p>
<p>52<br>00:03:59,960 –&gt; 00:04:07,960<br>And now we need a couple of methods in order to use this list, we’ll need to be able to initialize a list in some way.</p>
<p>53<br>00:04:07,960 –&gt; 00:04:15,960<br>So the initialization function will take an item and the rest of the list, the next part of the list.</p>
<p>54<br>00:04:15,960 –&gt; 00:04:18,960<br>And what is it going to do?</p>
<p>55<br>00:04:18,959 –&gt; 00:04:21,959<br>Well, let’s go into need to set the fields of the object.</p>
<p>56<br>00:04:21,959 –&gt; 00:04:23,959<br>And so this will have to be done as a series of assignment statements.</p>
<p>57<br>00:04:23,959 –&gt; 00:04:25,959<br>So we’ll need a statement block.</p>
<p>58<br>00:04:25,959 –&gt; 00:04:30,959<br>And we will set the item to be the I argument.</p>
<p>59<br>00:04:30,959 –&gt; 00:04:35,959<br>We’ll set the next attribute to be the in argument.</p>
<p>60<br>00:04:35,959 –&gt; 00:04:44,959<br>And now we actually want this initialized object here, this method here, to return the object itself.</p>
<p>61<br>00:04:44,959 –&gt; 00:04:48,959<br>So that and I’ll be convenient for chain together calls to init.</p>
<p>62<br>00:04:48,959 –&gt; 00:04:53,959<br>So we’ll have it return self, it’ll return the self object.</p>
<p>63<br>00:04:53,959 –&gt; 00:04:57,959<br>And that’s the end of our statement block.</p>
<p>64<br>00:04:57,959 –&gt; 00:04:59,959<br>And then that is the end of our method.</p>
<p>65<br>00:04:59,959 –&gt; 00:05:02,959<br>And we need a mistake up here.</p>
<p>66<br>00:05:02,959 –&gt; 00:05:05,959<br>We actually clear the return type of init.</p>
<p>67<br>00:05:05,959 –&gt; 00:05:08,959<br>And what it’s going to return, of course, is that it returns an object of type list.</p>
<p>68<br>00:05:08,959 –&gt; 00:05:11,959<br>How we need to put a list declaration there.</p>
<p>69<br>00:05:11,959 –&gt; 00:05:13,959<br>All right, so I think it’s care of init.</p>
<p>70<br>00:05:13,959 –&gt; 00:05:19,959<br>And now we can use this to build a build a list down here.</p>
<p>71<br>00:05:19,959 –&gt; 00:05:21,959<br>So what should we do?</p>
<p>72<br>00:05:21,959 –&gt; 00:05:27,959<br>Let’s actually have a new variable called list.</p>
<p>73<br>00:05:27,959 –&gt; 00:05:31,959<br>That will introduce here in this let this series of let bindings.</p>
<p>74<br>00:05:31,959 –&gt; 00:05:34,959<br>And let’s just build a list out of these three objects.</p>
<p>75<br>00:05:34,959 –&gt; 00:05:36,959<br>So we’ll say we’ll have a new list.</p>
<p>76<br>00:05:36,959 –&gt; 00:05:41,959<br>And then we’ll initialize it to contain the string hello.</p>
<p>77<br>00:05:41,959 –&gt; 00:05:46,959<br>And what should the rest of the list be?</p>
<p>78<br>00:05:46,959 –&gt; 00:05:54,959<br>Well, that should be another list, which is initialized to have the string world.</p>
<p>79<br>00:05:54,959 –&gt; 00:05:57,959<br>And what should be inside of that list?</p>
<p>80<br>00:05:57,959 –&gt; 00:06:02,959<br>Well, there has to be another new list object, which will initialize to have new line.</p>
<p>81<br>00:06:03,959 –&gt; 00:06:05,959<br>And now what do we put here?</p>
<p>82<br>00:06:05,959 –&gt; 00:06:07,959<br>Actually, a little bit of a problem here isn’t there.</p>
<p>83<br>00:06:07,959 –&gt; 00:06:09,959<br>We need to put a list object here.</p>
<p>84<br>00:06:09,959 –&gt; 00:06:12,959<br>But we don’t want to allocate a new list object.</p>
<p>85<br>00:06:12,959 –&gt; 00:06:16,959<br>We want that to be really the equivalent of a null pointer.</p>
<p>86<br>00:06:16,959 –&gt; 00:06:19,959<br>And there’s no name for that in cool.</p>
<p>87<br>00:06:19,959 –&gt; 00:06:22,959<br>Actually, you can’t write down the name of a null pointer.</p>
<p>88<br>00:06:22,959 –&gt; 00:06:24,959<br>It’s called void in cool.</p>
<p>89<br>00:06:24,959 –&gt; 00:06:28,959<br>There’s no special symbol for that.</p>
<p>90<br>00:06:28,959 –&gt; 00:06:33,959<br>So we’ll have to create a variable that is just not initialized.</p>
<p>91<br>00:06:33,959 –&gt; 00:06:39,959<br>And that will be, so an uninitialized variable of type list will, in fact, be void.</p>
<p>92<br>00:06:39,959 –&gt; 00:06:40,959<br>It’ll be a null pointer.</p>
<p>93<br>00:06:40,959 –&gt; 00:06:42,959<br>So let’s call that nil.</p>
<p>94<br>00:06:42,959 –&gt; 00:06:44,959<br>And it’ll be a type list.</p>
<p>95<br>00:06:44,959 –&gt; 00:06:45,959<br>And no initializer.</p>
<p>96<br>00:06:45,959 –&gt; 00:06:48,959<br>And so nil there will point to nothing or the void pointer.</p>
<p>97<br>00:06:48,959 –&gt; 00:06:52,959<br>And then we can use nil to terminate our list here.</p>
<p>98<br>00:06:52,959 –&gt; 00:06:56,959<br>And then we have to close off all the perenns for all the nesting here.</p>
<p>99<br>00:06:56,959 –&gt; 00:06:58,959<br>And I think that’s it.</p>
<p>100<br>00:06:58,959 –&gt; 00:07:00,959<br>And so that will be our list.</p>
<p>101<br>00:07:00,959 –&gt; 00:07:03,959<br>Okay, so we have a list of three strings.</p>
<p>102<br>00:07:03,959 –&gt; 00:07:07,959<br>And now what we want to do with that is to print it out.</p>
<p>103<br>00:07:07,959 –&gt; 00:07:11,959<br>And so what we would like to do is to have a list called to list.</p>
<p>104<br>00:07:11,959 –&gt; 00:07:16,959<br>And then a function that’s going to flatten that list and we’ll just print it.</p>
<p>105<br>00:07:16,959 –&gt; 00:07:21,959<br>So that is the, what the main program should do.</p>
<p>106<br>00:07:21,959 –&gt; 00:07:29,959<br>And now we have to write the flatten function.</p>
<p>107<br>00:07:29,959 –&gt; 00:07:35,959<br>So if flatten takes no arguments and it’s going to return a string, it’s going to return a single string.</p>
<p>108<br>00:07:35,959 –&gt; 00:07:39,959<br>And flatten is pretty simple function.</p>
<p>109<br>00:07:39,959 –&gt; 00:07:41,959<br>What do we have to do?</p>
<p>110<br>00:07:41,959 –&gt; 00:07:44,959<br>Well, there’s really two cases.</p>
<p>111<br>00:07:44,959 –&gt; 00:07:48,959<br>One is if we’re at the end of the string and the other is if we’re not yet at the end of the string.</p>
<p>112<br>00:07:48,959 –&gt; 00:07:50,959<br>So let’s test for that.</p>
<p>113<br>00:07:50,959 –&gt; 00:07:52,959<br>So how do we know if we’re at the end of the string?</p>
<p>114<br>00:07:52,959 –&gt; 00:07:56,959<br>Well, if the next pointer is void, then there is nothing more in the string.</p>
<p>115<br>00:07:56,959 –&gt; 00:08:01,959<br>And there actually is a special test for that in calls called the is void function.</p>
<p>116<br>00:08:01,959 –&gt; 00:08:03,959<br>And it’s written like this.</p>
<p>117<br>00:08:03,959 –&gt; 00:08:06,959<br>So if is void of next.</p>
<p>118<br>00:08:06,959 –&gt; 00:08:08,959<br>Okay, so the next field.</p>
<p>119<br>00:08:08,959 –&gt; 00:08:10,959<br>So the next field is void.</p>
<p>120<br>00:08:10,959 –&gt; 00:08:13,959<br>Then what are we going to return?</p>
<p>121<br>00:08:13,959 –&gt; 00:08:18,959<br>Well, then the result here is just the item.</p>
<p>122<br>00:08:18,959 –&gt; 00:08:22,959<br>Whatever the item was in this last element of the list.</p>
<p>123<br>00:08:22,959 –&gt; 00:08:28,959<br>And otherwise, what do we want to do?</p>
<p>124<br>00:08:28,959 –&gt; 00:08:34,960<br>Well, otherwise we want to take the item and we want to concatenate onto it.</p>
<p>125<br>00:08:34,960 –&gt; 00:08:40,960<br>The result of flattening the rest of the list.</p>
<p>126<br>00:08:40,960 –&gt; 00:08:46,960<br>And that is our flatten method.</p>
<p>127<br>00:08:46,960 –&gt; 00:08:52,960<br>So let’s see if that works.</p>
<p>128<br>00:08:52,960 –&gt; 00:08:58,960<br>So let’s compile this.</p>
<p>129<br>00:08:58,960 –&gt; 00:09:00,960<br>And we got a couple of syntax errors here.</p>
<p>130<br>00:09:00,960 –&gt; 00:09:06,960<br>So let’s go back and see what’s going on.</p>
<p>131<br>00:09:06,960 –&gt; 00:09:12,960<br>So we have a syntax error here at the end of the flatten method.</p>
<p>132<br>00:09:12,960 –&gt; 00:09:16,960<br>And we see that we left out the keyword to close a conditional.</p>
<p>133<br>00:09:16,960 –&gt; 00:09:21,960<br>So a conditional has to be ended with with fee.</p>
<p>134<br>00:09:21,960 –&gt; 00:09:25,960<br>And let’s see if that’s working now.</p>
<p>135<br>00:09:25,960 –&gt; 00:09:32,960<br>And we slow the syntax error at line 29.</p>
<p>136<br>00:09:32,960 –&gt; 00:09:39,960<br>And the mistake here is that we forgot to declare the type of this variable, which is a list.</p>
<p>137<br>00:09:39,960 –&gt; 00:09:45,960<br>And then it gets initialized to this big expression that we wrote out.</p>
<p>138<br>00:09:45,960 –&gt; 00:09:48,960<br>And we just do the indentation a little more nicely here.</p>
<p>139<br>00:09:48,960 –&gt; 00:10:00,960<br>And notice something actually that’s worth mentioning here that this definition here, this definition of the variable list, depends on the definition of the previous variables in the let.</p>
<p>140<br>00:10:00,960 –&gt; 00:10:03,960<br>Each of so on a let binding is made.</p>
<p>141<br>00:10:03,960 –&gt; 00:10:09,960<br>The name that the variable that’s bound is actually available in subsequent let expressions.</p>
<p>142<br>00:10:09,960 –&gt; 00:10:19,960<br>So in this case, this variable list makes use of all of hello world and new line, which were defined earlier in the same let construct.</p>
<p>143<br>00:10:19,960 –&gt; 00:10:26,960<br>All right, let’s save this and come over here and compile it.</p>
<p>144<br>00:10:26,960 –&gt; 00:10:29,960<br>And we see we got another bug in the code.</p>
<p>145<br>00:10:29,960 –&gt; 00:10:31,960<br>So we come up here.</p>
<p>146<br>00:10:31,960 –&gt; 00:10:32,960<br>I was here leave.</p>
<p>147<br>00:10:32,960 –&gt; 00:10:33,960<br>I made a mistake here.</p>
<p>148<br>00:10:33,960 –&gt; 00:10:37,960<br>I’ve used functional notation here calling flatten of next.</p>
<p>149<br>00:10:37,960 –&gt; 00:10:42,960<br>And what I actually wanted to do was to dispatch to next on the method flatten.</p>
<p>150<br>00:10:42,960 –&gt; 00:10:45,960<br>So that should be written like that.</p>
<p>151<br>00:10:45,960 –&gt; 00:10:47,960<br>All right.</p>
<p>152<br>00:10:47,960 –&gt; 00:10:48,960<br>Probably getting close now.</p>
<p>153<br>00:10:48,960 –&gt; 00:10:50,960<br>Let’s see if it works yet.</p>
<p>154<br>00:10:50,960 –&gt; 00:10:51,960<br>Well, it compiles.</p>
<p>155<br>00:10:51,960 –&gt; 00:10:55,960<br>And now let’s see if it runs.</p>
<p>156<br>00:10:55,960 –&gt; 00:11:00,960<br>And indeed it does print.</p>
<p>157<br>00:11:00,960 –&gt; 00:11:03,960<br>So hello world just as we expected.</p>
<p>158<br>00:11:03,960 –&gt; 00:11:09,960<br>Now let’s go back to our program and let’s generalize this list abstraction in one way.</p>
<p>159<br>00:11:09,960 –&gt; 00:11:15,960<br>Let’s say that we can have an arbitrary list of objects, not just strings.</p>
<p>160<br>00:11:15,960 –&gt; 00:11:21,960<br>And that will require us to change a few things so it can be initialized now with an object.</p>
<p>161<br>00:11:21,960 –&gt; 00:11:26,960<br>And now when it comes time to flatten this list, we want to reduce a string.</p>
<p>162<br>00:11:26,960 –&gt; 00:11:34,960<br>We want to produce a print representation, but not everything in the in the list is necessarily a string.</p>
<p>163<br>00:11:34,960 –&gt; 00:11:42,960<br>And we need a way to traverse the list and do different things for different kinds of things that might be in the list for different types of things that might be in the list.</p>
<p>164<br>00:11:42,960 –&gt; 00:11:50,960<br>And so there’s a constructing cool for recovering the type of an object at runtime.</p>
<p>165<br>00:11:50,960 –&gt; 00:11:52,960<br>And this is called the case construct.</p>
<p>166<br>00:11:52,960 –&gt; 00:11:56,960<br>So let me first introduce a let expression here.</p>
<p>167<br>00:11:56,960 –&gt; 00:12:03,960<br>We’ll let the string that we’re going to construct, which is of type string.</p>
<p>168<br>00:12:03,960 –&gt; 00:12:06,960<br>And that’s going to be initialized to something.</p>
<p>169<br>00:12:06,960 –&gt; 00:12:09,960<br>And now it’s going to be a case.</p>
<p>170<br>00:12:09,960 –&gt; 00:12:10,960<br>And what are we going to case on?</p>
<p>171<br>00:12:10,960 –&gt; 00:12:13,960<br>Well, it’s going to depend on the kind of thing the item is.</p>
<p>172<br>00:12:13,960 –&gt; 00:12:16,960<br>So the item in the list could be it could be different kinds of types.</p>
<p>173<br>00:12:16,960 –&gt; 00:12:20,960<br>And we want to do a different operation depending on what item actually is.</p>
<p>174<br>00:12:20,960 –&gt; 00:12:24,960<br>So do case item and then the keyword is of.</p>
<p>175<br>00:12:24,960 –&gt; 00:12:33,960<br>And now we have different branches of the case expression for different kinds of things that could be in the list.</p>
<p>176<br>00:12:33,960 –&gt; 00:12:36,960<br>So let’s say if it’s an int.</p>
<p>177<br>00:12:36,960 –&gt; 00:12:43,960<br>Okay, so what this does is this says that if the item is an int, then we’re going to rename it to I.</p>
<p>178<br>00:12:43,960 –&gt; 00:12:46,960<br>We’re going to bind I to that integer.</p>
<p>179<br>00:12:46,960 –&gt; 00:12:48,960<br>And then we can do something with I.</p>
<p>180<br>00:12:48,960 –&gt; 00:12:50,960<br>And what would we want to do with I?</p>
<p>181<br>00:12:50,960 –&gt; 00:12:55,960<br>Well, we probably want to convert it to a to a string.</p>
<p>182<br>00:12:55,960 –&gt; 00:13:00,960<br>So I do I to a of I.</p>
<p>183<br>00:13:00,960 –&gt; 00:13:04,960<br>And what if in fact.</p>
<p>184<br>00:13:04,960 –&gt; 00:13:06,960<br>That item happened to be of type string.</p>
<p>185<br>00:13:06,960 –&gt; 00:13:08,960<br>The item in the list have to be of type string.</p>
<p>186<br>00:13:08,960 –&gt; 00:13:14,960<br>Well, then we can just use the item itself as a string representation.</p>
<p>187<br>00:13:14,960 –&gt; 00:13:16,960<br>And we can do this for other kinds of types.</p>
<p>188<br>00:13:16,960 –&gt; 00:13:21,960<br>If we have other kinds of types in our system, we can continue to list out other cases here.</p>
<p>189<br>00:13:21,960 –&gt; 00:13:24,960<br>And how to convert them into a string representation.</p>
<p>190<br>00:13:24,960 –&gt; 00:13:26,960<br>But let’s have a default case here.</p>
<p>191<br>00:13:26,960 –&gt; 00:13:36,960<br>We’ll say if it’s any other kind of type, which would which we should be covered by having a branch saying that if it’s a type object, we’ll call it O, then we should just abort.</p>
<p>192<br>00:13:36,960 –&gt; 00:13:42,960<br>Okay, so we should just call the abort function and quit.</p>
<p>193<br>00:13:42,960 –&gt; 00:13:44,960<br>And that’s our case.</p>
<p>194<br>00:13:44,960 –&gt; 00:13:52,960<br>It needs to be terminated with a closing keyword called ESAC again, the reverse of case.</p>
<p>195<br>00:13:52,960 –&gt; 00:14:00,960<br>And now we can use that string that we constructed in our little function here.</p>
<p>196<br>00:14:00,960 –&gt; 00:14:06,960<br>So if the next field is void, then we’re just going to return the string.</p>
<p>197<br>00:14:06,960 –&gt; 00:14:15,960<br>Otherwise, we’re going to return the string concatenated with the flattening out of the rest of the list.</p>
<p>198<br>00:14:15,960 –&gt; 00:14:17,960<br>Now, there’s a couple of things we have to fix up.</p>
<p>199<br>00:14:17,960 –&gt; 00:14:29,960<br>We use the I2A method here, which means that list needs to inherit from the conversion class A2I.</p>
<p>200<br>00:14:29,960 –&gt; 00:14:34,960<br>And there’s another issue here, I see.</p>
<p>201<br>00:14:34,960 –&gt; 00:14:35,960<br>And that’s right here.</p>
<p>202<br>00:14:35,960 –&gt; 00:14:44,960<br>So if you notice, the case statement needs to produce a string.</p>
<p>203<br>00:14:44,960 –&gt; 00:14:47,960<br>Okay. And it turns out that a board does not return a string.</p>
<p>204<br>00:14:47,960 –&gt; 00:14:51,960<br>A board actually terminates the program, but its type is that it returns an object.</p>
<p>205<br>00:14:51,960 –&gt; 00:14:57,960<br>And so here we have to convince the type checker to convince to accept this piece of code.</p>
<p>206<br>00:14:57,960 –&gt; 00:15:00,960<br>And we need to get this branch here to type as a string.</p>
<p>207<br>00:15:00,960 –&gt; 00:15:07,960<br>So what we can do, and this is ugly, but it’s the way to do it, is we put it in a block, and a statement block.</p>
<p>208<br>00:15:07,960 –&gt; 00:15:11,960<br>We call a board first, and again, that will just terminate the program.</p>
<p>209<br>00:15:11,960 –&gt; 00:15:14,960<br>And now we can put any string expression we want after that.</p>
<p>210<br>00:15:14,960 –&gt; 00:15:18,960<br>And that will give a type string to the entire block.</p>
<p>211<br>00:15:18,960 –&gt; 00:15:22,960<br>And we can just put the empty string here, for example, and that has to be terminated with a semi-colon.</p>
<p>212<br>00:15:22,960 –&gt; 00:15:26,960<br>And so this is in a block, and we can close that with a curly brace.</p>
<p>213<br>00:15:26,960 –&gt; 00:15:30,960<br>Okay. So this is just something we have to do to make the type checker happy.</p>
<p>214<br>00:15:30,960 –&gt; 00:15:33,960<br>And that may be everything we needed to do.</p>
<p>215<br>00:15:33,960 –&gt; 00:15:39,960<br>So let’s try compiling this.</p>
<p>216<br>00:15:39,960 –&gt; 00:15:45,960<br>And we have to include the conversion library.</p>
<p>217<br>00:15:45,960 –&gt; 00:15:50,960<br>And we have one syntax error, so far.</p>
<p>218<br>00:15:50,960 –&gt; 00:16:02,960<br>And that’s because we forgot to put the semi-colon terminator on each of our, each of the variables that we were introducing in the let.</p>
<p>219<br>00:16:02,960 –&gt; 00:16:05,960<br>Okay. Got to save that.</p>
<p>220<br>00:16:05,960 –&gt; 00:16:10,960<br>Let’s try this again.</p>
<p>221<br>00:16:10,960 –&gt; 00:16:13,960<br>And oops, I didn’t actually manage to fix a syntax error.</p>
<p>222<br>00:16:13,960 –&gt; 00:16:16,960<br>And that’s because I put the semi-colon in the wrong place.</p>
<p>223<br>00:16:16,960 –&gt; 00:16:24,960<br>Actually, I forgot the variables that are bound in a let are separated by, by commas.</p>
<p>224<br>00:16:24,960 –&gt; 00:16:30,960<br>But the branches of the case have to be terminated by semi-colons.</p>
<p>225<br>00:16:30,960 –&gt; 00:16:37,960<br>So what I said before was incorrect about using semi-colons to terminate let bindings.</p>
<p>226<br>00:16:37,960 –&gt; 00:16:40,960<br>And we have to do some changes in this where we need it in this example.</p>
<p>227<br>00:16:40,960 –&gt; 00:16:44,960<br>All right. Anyway, coming back to this, let’s see if it compiles.</p>
<p>228<br>00:16:44,960 –&gt; 00:16:47,960<br>And it does. And now let’s run it.</p>
<p>229<br>00:16:47,960 –&gt; 00:16:56,960<br>And it works. Now, of course, we have it actually exploited the ability to have different types of objects in the list.</p>
<p>230<br>00:16:56,960 –&gt; 00:17:04,960<br>So let’s do that. Let’s add an integer in here.</p>
<p>231<br>00:17:04,960 –&gt; 00:17:11,960<br>Type int and let’s give it a number 42.</p>
<p>232<br>00:17:11,960 –&gt; 00:17:21,960<br>And we can insert it in here.</p>
<p>233<br>00:17:21,960 –&gt; 00:17:25,960<br>And now we can pass any object to a knit in the first position.</p>
<p>234<br>00:17:25,960 –&gt; 00:17:31,960<br>So we’ll just put in 42 right there.</p>
<p>235<br>00:17:31,960 –&gt; 00:17:36,960<br>And when we compile and run this, it should print a low world 42.</p>
<p>236<br>00:17:36,960 –&gt; 00:17:41,960<br>If everything goes as expected.</p>
<p>237<br>00:17:41,960 –&gt; 00:17:45,960<br>And it does. And that concludes our little tour of cool.</p>
<p>238<br>00:17:45,960 –&gt; 00:17:49,960<br>There are a few features that we haven’t shown in these examples.</p>
<p>239<br>00:17:49,960 –&gt; 00:18:04,960<br>And you can look in the examples directory for lots more programs, many more programs that will show you all the different ins and outs and details of the other language features, as well as the ones we’ve covered here.</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>CS143 P6Week102 03 Cool Example Iii Final Correction</div>
      <div>http://example.com/2025/10/25/CS143 P6Week102-03-cool-example-iii-final-correction/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月25日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/25/CS143%20P70Week610-03-B+Self+Type+Operations/" title="CS143 P70Week610 03 B+Self+Type+Operations">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">CS143 P70Week610 03 B+Self+Type+Operations</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/25/CS143%20P63Week509-08-A+Typing+Methods/" title="CS143 P63Week509 08 A+Typing+Methods">
                        <span class="hidden-mobile">CS143 P63Week509 08 A+Typing+Methods</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
