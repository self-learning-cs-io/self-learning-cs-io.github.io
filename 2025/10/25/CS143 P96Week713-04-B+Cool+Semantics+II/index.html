

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="100:00:00,000 –&gt; 00:00:06,960To summarize our discussion of dynamic dispatch, the body of a method is invoked with an environment 200:00:06,960 –&gt; 00:00:16,000E that has definitions for the form">
<meta property="og:type" content="article">
<meta property="og:title" content="CS143 P96Week713 04 B+Cool+Semantics+II">
<meta property="og:url" content="http://example.com/2025/10/25/CS143%20P96Week713-04-B+Cool+Semantics+II/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="100:00:00,000 –&gt; 00:00:06,960To summarize our discussion of dynamic dispatch, the body of a method is invoked with an environment 200:00:06,960 –&gt; 00:00:16,000E that has definitions for the form">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-25T07:38:14.417Z">
<meta property="article:modified_time" content="2025-10-25T07:40:49.228Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>CS143 P96Week713 04 B+Cool+Semantics+II - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="CS143 P96Week713 04 B+Cool+Semantics+II"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-25 15:38" pubdate>
          2025年10月25日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          392 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          4 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">CS143 P96Week713 04 B+Cool+Semantics+II</h1>
            
            
              <div class="markdown-body">
                
                <p>1<br>00:00:00,000 –&gt; 00:00:06,960<br>To summarize our discussion of dynamic dispatch, the body of a method is invoked with an environment</p>
<p>2<br>00:00:06,960 –&gt; 00:00:16,000<br>E that has definitions for the formal arguments and the attributes of the self object and a store</p>
<p>3<br>00:00:16,000 –&gt; 00:00:24,000<br>that’s just like the caller store except that it also has the actual arguments bound to the locations allocated for the formal parameters.</p>
<p>4<br>00:00:24,000 –&gt; 00:00:32,000<br>Notice in the rules that the notion of a frame or activation record is implicit. We don’t actually build a data structure</p>
<p>5<br>00:00:32,000 –&gt; 00:00:40,000<br>that contains all of the values, all of the arguments and the return address and all that stuff together.</p>
<p>6<br>00:00:40,000 –&gt; 00:00:46,000<br>That information is not gathered together in one place. It’s a little more abstract. We don’t actually have to say</p>
<p>7<br>00:00:46,000 –&gt; 00:00:53,000<br>whether things are allocated on the stack or on the heap. And that’s a good feature. That allows us to potentially have a range of implementations</p>
<p>8<br>00:00:53,000 –&gt; 00:01:01,000<br>that can all implement the semantics correctly. Now, we didn’t do the semantics or static dispatch, but it’s extremely similar.</p>
<p>9<br>00:01:01,000 –&gt; 00:01:13,000<br>The only difference is in how the class that we are going to be dispatching to is looked up. So in a static dispatch, you might be able to name the class that you want to dispatch to.</p>
<p>10<br>00:01:13,000 –&gt; 00:01:23,000<br>So there’s one extra line to decide what class is being dispatched to in the formal rule. And you can look in the manual to see how that works.</p>
<p>11<br>00:01:23,000 –&gt; 00:01:32,000<br>So it’s worth pointing out that while the operational rules are very detailed, they intentionally omit some cases that you might think they should cover.</p>
<p>12<br>00:01:32,000 –&gt; 00:01:36,000<br>So let’s take a look at our dispatch example again.</p>
<p>13<br>00:01:36,000 –&gt; 00:01:53,000<br>So here, notice that we look up the class of V0. So V0 is an object and we check what its class tag is. And then we look up in that class, the name of the method that we’re dispatching to.</p>
<p>14<br>00:01:53,000 –&gt; 00:02:01,000<br>And we get out the definition of the method or enough of the definition of the method that we can write the rest of the rule.</p>
<p>15<br>00:02:02,000 –&gt; 00:02:14,000<br>Now, what would happen if there was no such method F in the class X? I mean, this rule just assumes that method F is in fact defined in class X.</p>
<p>16<br>00:02:14,000 –&gt; 00:02:22,000<br>And the rule doesn’t say anything about what to do if it turns out that this class X doesn’t have any method F.</p>
<p>17<br>00:02:23,000 –&gt; 00:02:33,000<br>Well, that actually can’t happen. So type checking has already guaranteed that when we go to look up method F in class X, it will exist.</p>
<p>18<br>00:02:33,000 –&gt; 00:02:42,000<br>That was one of the points of the type checking rules was that no dynamic dispatch could ever dispatch to a method that wasn’t defined.</p>
<p>19<br>00:02:42,000 –&gt; 00:02:55,000<br>So the fact of the type checking has already been done is what allows us to omit some cases. Some of there are some checks that we don’t have to do because we know that the type system has already effectively done them.</p>
<p>20<br>00:02:55,000 –&gt; 00:03:09,000<br>And the rules would only be more complicated if we didn’t have type checking and we needed to actually say what would happen in all the cases where type checking where things were not type correct.</p>
<p>21<br>00:03:09,000 –&gt; 00:03:16,000<br>Now, there are some runtime errors that the type checker doesn’t prevent, however, and in cool, there are four.</p>
<p>22<br>00:03:16,000 –&gt; 00:03:28,000<br>One is a dispatch devoid division by zero. You have a substring index as out of range or you could run out of memory. You could try to allocate a new object and not have enough space for that.</p>
<p>23<br>00:03:28,000 –&gt; 00:03:37,000<br>And in such cases, the execution has to abort gracefully, and that means with an error message, not just with a segmentation fault or some other kind of hard crash.</p>
<p>24<br>00:03:37,000 –&gt; 00:03:47,000<br>And in the manual, there are some guidelines as to what a correct cool implementation should do in these four situations.</p>
<p>25<br>00:03:47,000 –&gt; 00:03:55,000<br>To summarize the material in the last couple of videos, the operational semantics rules are really very precise and detailed.</p>
<p>26<br>00:03:55,000 –&gt; 00:04:03,000<br>If you understand them, then you really understand how to implement a correct cool compiler.</p>
<p>27<br>00:04:03,000 –&gt; 00:04:12,000<br>So the rules are complete enough and give you enough detail that they really can’t go wrong if you just implement what the rules tell you to do.</p>
<p>28<br>00:04:12,000 –&gt; 00:04:23,000<br>So you need to read the rules very carefully. Now, I’ll emphasize that because it’s actually quite a lot going on in the rules. They’re written in a certain way and to achieve a certain effect.</p>
<p>29<br>00:04:23,000 –&gt; 00:04:34,000<br>And I pointed out a couple of subtle things in the rules. And so, you know, you have to really actually study the rules in order to internalize what they mean and be able to implement them correctly.</p>
<p>30<br>00:04:34,000 –&gt; 00:04:53,000<br>It’s also a great way to understand these rules in detail. It’s actually a great way to learn quite a bit about the kind of formal thinking that goes into the design of programming languages and what it means for a programming language to have a semantics and for implementation of something to be correct.</p>
<p>31<br>00:04:53,000 –&gt; 00:04:53,040<br>Now, having said all that, I should say that most languages do not have a well-s</p>
<p>32<br>00:04:53,040 –&gt; 00:05:08,000<br>specified operational semantics. There are some substantial languages and fairly realistic languages that do have a formal semantics, but most of the languages that you’re familiar with do not.</p>
<p>33<br>00:05:08,000 –&gt; 00:05:18,000<br>Finally, just as a comment, you know, when portability is important when you really want software that you’re right to behave exactly the same in different environments.</p>
<p>34<br>00:05:18,000 –&gt; 00:05:43,000<br>So, you know, if I take the same program and I move it to a different machine or a different operating system, I still want to have some kind of guarantee that this offer will behave as it is the same on both the old machine or the both in the old environment and the new environment, then I really need some independent definition of what it means or what the behavior of these programs should be.</p>
<p>35<br>00:05:43,000 –&gt; 00:05:48,000<br>And that’s where a formal semantics becomes really critical.</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>CS143 P96Week713 04 B+Cool+Semantics+II</div>
      <div>http://example.com/2025/10/25/CS143 P96Week713-04-B+Cool+Semantics+II/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月25日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/25/CS143%20P9Week203-02-lexical-analysis-examples-final/" title="CS143 P9Week203 02 Lexical Analysis Examples Final">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">CS143 P9Week203 02 Lexical Analysis Examples Final</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/25/CS143%20P95Week713-04-A+Cool+Semantics+II/" title="CS143 P95Week713 04 A+Cool+Semantics+II">
                        <span class="hidden-mobile">CS143 P95Week713 04 A+Cool+Semantics+II</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
