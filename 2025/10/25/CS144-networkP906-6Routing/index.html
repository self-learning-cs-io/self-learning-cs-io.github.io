

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
    <meta name="description" content="100:00:00,000 –&gt; 00:00:07,000In an earlier video about the basics of routing, I told you about what multi-cast routing is in principle. 200:00:07,000 –&gt; 00:00:12,000In this video, I’m going to b">
<meta property="og:type" content="article">
<meta property="og:title" content="CS144 NetworkP906 6Routing">
<meta property="og:url" content="http://example.com/2025/10/25/CS144-networkP906-6Routing/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="100:00:00,000 –&gt; 00:00:07,000In an earlier video about the basics of routing, I told you about what multi-cast routing is in principle. 200:00:07,000 –&gt; 00:00:12,000In this video, I’m going to b">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-10-25T05:03:39.795Z">
<meta property="article:modified_time" content="2025-10-25T05:03:39.795Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>CS144 NetworkP906 6Routing - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 8.0.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="CS144 NetworkP906 6Routing"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-10-25 13:03" pubdate>
          2025年10月25日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          1.6k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          14 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">CS144 NetworkP906 6Routing</h1>
            
            
              <div class="markdown-body">
                
                <p>1<br>00:00:00,000 –&gt; 00:00:07,000<br>In an earlier video about the basics of routing, I told you about what multi-cast routing is in principle.</p>
<p>2<br>00:00:07,000 –&gt; 00:00:12,000<br>In this video, I’m going to be telling about a number of techniques related to IP multi-cast.</p>
<p>3<br>00:00:12,000 –&gt; 00:00:18,000<br>So far, we’ve assumed that all packets go to a single destination or that they’re unicast.</p>
<p>4<br>00:00:18,000 –&gt; 00:00:25,000<br>There are some applications where we want packets to be duplicated to a number of hosts, to a set of hosts.</p>
<p>5<br>00:00:25,000 –&gt; 00:00:34,000<br>So for example, A might want to send to B, C, X, and E without sending to D.</p>
<p>6<br>00:00:34,000 –&gt; 00:00:41,000<br>For example, it could be a broadcast TV where B, C, X, and E are all watching the same TV or radio station.</p>
<p>7<br>00:00:41,000 –&gt; 00:00:44,000<br>It could be a video conference among us for the number of participants.</p>
<p>8<br>00:00:44,000 –&gt; 00:00:48,000<br>It could be automatic updates to a large number of hosts and so on.</p>
<p>9<br>00:00:48,000 –&gt; 00:00:54,000<br>So while we could easily send packets to each, one at a time to each destination as I showed,</p>
<p>10<br>00:00:54,000 –&gt; 00:01:00,000<br>it’s natural to ask if the network can or should do the replication for us.</p>
<p>11<br>00:01:00,000 –&gt; 00:01:13,000<br>So for example, if the network was to duplicate the packets at R1 here and then it can more efficiently deliver to the end hosts,</p>
<p>12<br>00:01:13,000 –&gt; 00:01:20,000<br>A only sends one packet, yet the packets are delivered correctly to all of the end destinations.</p>
<p>13<br>00:01:21,000 –&gt; 00:01:24,000<br>So in this video I’m going to look at a number of techniques for doing this.</p>
<p>14<br>00:01:24,000 –&gt; 00:01:31,000<br>I’m going to start with the general techniques and principles and then move on to the practice,</p>
<p>15<br>00:01:31,000 –&gt; 00:01:34,000<br>what is actually done in the internet.</p>
<p>16<br>00:01:34,000 –&gt; 00:01:38,000<br>So we always already saw one way in which packets could be delivered to a large number of hosts</p>
<p>17<br>00:01:38,000 –&gt; 00:01:41,000<br>with a rather simplistic approach of flooding.</p>
<p>18<br>00:01:41,000 –&gt; 00:01:52,000<br>So in flooding, if I’ve got a source, and it’s sending through the network to a number of routers,</p>
<p>19<br>00:01:52,000 –&gt; 00:01:55,000<br>let’s say to be down here.</p>
<p>20<br>00:01:55,000 –&gt; 00:02:02,000<br>I said that if the network is flooding, if we use flooding as an approach to reach B,</p>
<p>21<br>00:02:02,000 –&gt; 00:02:07,000<br>then packets from A could simply be replicated at each router along the path</p>
<p>22<br>00:02:07,000 –&gt; 00:02:12,000<br>by sending out of every interface except the one through which the packet arrived.</p>
<p>23<br>00:02:12,000 –&gt; 00:02:17,000<br>So packets from A could come down to this first router, go out this way and this way,</p>
<p>24<br>00:02:17,000 –&gt; 00:02:24,000<br>then when it gets to this router it could be sent out this way and this way and likewise here.</p>
<p>25<br>00:02:24,000 –&gt; 00:02:28,000<br>And eventually clearly the packet is going to get delivered to B.</p>
<p>26<br>00:02:28,000 –&gt; 00:02:30,000<br>In fact it will be delivered to every leaf in the network.</p>
<p>27<br>00:02:30,000 –&gt; 00:02:37,000<br>The basic problem with flooding is that packets when there are loops in the topology,</p>
<p>28<br>00:02:37,000 –&gt; 00:02:42,000<br>packets can loop forever because when it gets packets coming from this direction,</p>
<p>29<br>00:02:42,000 –&gt; 00:02:46,000<br>hit this router, this router will say, aha, the packet came in through this interface,</p>
<p>30<br>00:02:46,000 –&gt; 00:02:50,000<br>I’m going to send out of all of the interfaces except the one through which it came</p>
<p>31<br>00:02:50,000 –&gt; 00:02:53,000<br>and then of course it’s going to keep looping forever.</p>
<p>32<br>00:02:53,000 –&gt; 00:02:58,000<br>So we saw in the spanning tree protocol how these loops were broken.</p>
<p>33<br>00:02:58,000 –&gt; 00:03:02,000<br>We’re going to look at a different way that they can be avoided in the first place.</p>
<p>34<br>00:03:02,000 –&gt; 00:03:06,000<br>And that approach is called reverse path broadcast.</p>
<p>35<br>00:03:06,000 –&gt; 00:03:14,000<br>And this is the basis for the early multi-cast methods that we used in the internet.</p>
<p>36<br>00:03:14,000 –&gt; 00:03:17,000<br>The first technique I’m going to be describing is called reverse path broadcast,</p>
<p>37<br>00:03:17,000 –&gt; 00:03:20,000<br>also known as reverse path forwarding.</p>
<p>38<br>00:03:20,000 –&gt; 00:03:27,000<br>It’s a very clever technique that’s widely used and was used in the very first internet multi-cast routing protocols.</p>
<p>39<br>00:03:27,000 –&gt; 00:03:30,000<br>And it builds on a very simple observation.</p>
<p>40<br>00:03:30,000 –&gt; 00:03:36,000<br>And that observation is that before A has even started sending multi-cast,</p>
<p>41<br>00:03:36,000 –&gt; 00:03:44,000<br>the network will have already built a minimum cost spanning tree covering all of the hosts that A can reach.</p>
<p>42<br>00:03:44,000 –&gt; 00:03:49,000<br>And we saw how that was done in the Unicast routing protocols earlier.</p>
<p>43<br>00:03:49,000 –&gt; 00:03:59,000<br>So for example, R1 already knows how the minimum cost spanning tree is for all of the packets going towards A.</p>
<p>44<br>00:03:59,000 –&gt; 00:04:10,000<br>So there is essentially a minimum cost spanning tree in the network that has been built by all of the routers together on how to reach A.</p>
<p>45<br>00:04:10,000 –&gt; 00:04:19,000<br>So A can use that as a loop-free method in order to deliver packets to everybody else.</p>
<p>46<br>00:04:19,000 –&gt; 00:04:29,000<br>So first let me describe the broadcast case, which is like flooding, but without the loop packets lasting forever.</p>
<p>47<br>00:04:29,000 –&gt; 00:04:35,000<br>So imagine now that A is sending a packet to everybody else.</p>
<p>48<br>00:04:35,000 –&gt; 00:04:39,000<br>And that packet is going to have an address in it.</p>
<p>49<br>00:04:39,000 –&gt; 00:04:42,000<br>And I’ll talk about the addresses later.</p>
<p>50<br>00:04:42,000 –&gt; 00:04:48,000<br>So it’s going to have a group address corresponding to who it’s sending to, but it’ll have the source address A in it.</p>
<p>51<br>00:04:48,000 –&gt; 00:04:54,000<br>And because this packet came from A, the routers at each hop along the way can ask the question,</p>
<p>52<br>00:04:54,000 –&gt; 00:04:58,000<br>is the interface over which this packet arrives?</p>
<p>53<br>00:04:58,000 –&gt; 00:05:00,000<br>So this interface here.</p>
<p>54<br>00:05:00,000 –&gt; 00:05:05,000<br>Is it on the shortest path spanning tree from me to A?</p>
<p>55<br>00:05:05,000 –&gt; 00:05:15,000<br>And you can look that up in its forwarding table to see whether if it was sending a Unicast packet to A rather than a multi-cast packet from A,</p>
<p>56<br>00:05:15,000 –&gt; 00:05:23,000<br>if it was sending a Unicast packet to A, is this the path, this is the interface through which it would depart from this router?</p>
<p>57<br>00:05:24,000 –&gt; 00:05:30,000<br>So it looks up the address, the source address in its table, and it’s going to look that up in its forwarding table.</p>
<p>58<br>00:05:30,000 –&gt; 00:05:39,000<br>And if this is the interface through which it would send it, if it was sending a Unicast, then it will accept it and send it out of every other interface.</p>
<p>59<br>00:05:39,000 –&gt; 00:05:42,000<br>So it will send it out of every other interface.</p>
<p>60<br>00:05:42,000 –&gt; 00:05:46,000<br>Likewise, when it gets to R2, R2 will ask the same question.</p>
<p>61<br>00:05:46,000 –&gt; 00:05:51,000<br>If it was sending a Unicast packet to A, is this the interface through which it would send it?</p>
<p>62<br>00:05:51,000 –&gt; 00:05:56,000<br>The answer is yes, so therefore it will send it out of every other interface.</p>
<p>63<br>00:05:56,000 –&gt; 00:06:02,000<br>So it’s a little bit like flooding, but it’s asking a more detailed question, is this the interface through which I would send it,</p>
<p>64<br>00:06:02,000 –&gt; 00:06:06,000<br>if it was a Unicast packet going to A?</p>
<p>65<br>00:06:06,000 –&gt; 00:06:16,000<br>So you can see here that R3 would also ask the same question, and it would say yes, this is the interface through which I would send it to A,</p>
<p>66<br>00:06:16,000 –&gt; 00:06:19,000<br>so therefore I am going to send it out of all of the other ports.</p>
<p>67<br>00:06:19,000 –&gt; 00:06:28,000<br>However, when this packet reaches R2, it will come through this interface, which is not on the green shortest path tree, back to A.</p>
<p>68<br>00:06:28,000 –&gt; 00:06:32,000<br>So therefore R2 will drop that packet, it won’t send it.</p>
<p>69<br>00:06:32,000 –&gt; 00:06:35,000<br>And you can see that it’s just broken the loop.</p>
<p>70<br>00:06:35,000 –&gt; 00:06:41,000<br>Same thing will happen over here at R8, this is not on the green shortest path tree, so that packet will be dropped.</p>
<p>71<br>00:06:41,000 –&gt; 00:06:50,000<br>And you can convince yourself that there in fact will be no loops, because packets will follow that spanning tree that has already been built.</p>
<p>72<br>00:06:50,000 –&gt; 00:06:59,000<br>So there’s a clever idea, and you can see what’s called reverse path broadcast, because it’s using the spanning tree that is in the opposite direction.</p>
<p>73<br>00:07:00,000 –&gt; 00:07:05,000<br>Now this is all very well as a means for broadcast, but we’re talking about multi-cast.</p>
<p>74<br>00:07:05,000 –&gt; 00:07:16,000<br>In this particular case, the packet would have been delivered to all of the end hosts, whereas in fact we wanted it to be delivered to every end host except D,</p>
<p>75<br>00:07:16,000 –&gt; 00:07:19,000<br>that was the set of hosts that we were trying to deliver to.</p>
<p>76<br>00:07:20,000 –&gt; 00:07:40,000<br>So as a simple extension to this, there is something that’s called pruning, and usually referred to as reverse path broadcast plus pruning, or RPB plus pruning, in which those routers that don’t have any connected hosts interested in receiving the packet.</p>
<p>77<br>00:07:40,000 –&gt; 00:07:44,000<br>So in our case, D is not part of the multi-cast group.</p>
<p>78<br>00:07:44,000 –&gt; 00:07:56,000<br>So R6 would send what’s called a prune message, which I’ll just show as a dotted line, so it’ll send prune, and say, hey, I actually don’t have any end hosts interested in receiving this.</p>
<p>79<br>00:07:56,000 –&gt; 00:08:01,000<br>Please don’t send me multi-cast packets for this group address anymore.</p>
<p>80<br>00:08:01,000 –&gt; 00:08:07,000<br>And so it will prune G and say, I have no interest in this.</p>
<p>81<br>00:08:08,000 –&gt; 00:08:20,000<br>So in this case, this would then be removed from the reverse path broadcast tree, and now that tree will only reach the end hosts that are interested in it.</p>
<p>82<br>00:08:20,000 –&gt; 00:08:24,000<br>So it’s a way of decreasing the inefficiency of broadcast.</p>
<p>83<br>00:08:24,000 –&gt; 00:08:33,000<br>However, it clearly has the inefficiency still that to start with, every router will hear about it before it starts pruning.</p>
<p>84<br>00:08:33,000 –&gt; 00:08:39,000<br>So in a very, very large network, this is probably impractical.</p>
<p>85<br>00:08:39,000 –&gt; 00:08:47,000<br>So in summary, reverse path broadcast plus pruning packets are delivered loop free to every end host.</p>
<p>86<br>00:08:47,000 –&gt; 00:08:55,000<br>Because with no interest in the, with no interested hosts attached to them, we’ll send prune messages back towards the source.</p>
<p>87<br>00:08:55,000 –&gt; 00:09:03,000<br>And of course, they can use the unicast address of the source in order to send that prune message, so it’ll follow the tree back towards the source.</p>
<p>88<br>00:09:03,000 –&gt; 00:09:09,000<br>The resulting tree is the minimum cost spanning tree from the source to the set of interested hosts.</p>
<p>89<br>00:09:09,000 –&gt; 00:09:21,000<br>So in a efficient way, an efficient tree that we end up with, although the method to get there is a little inefficient because we have to start by communicating to all of the routers in the network.</p>
<p>90<br>00:09:21,000 –&gt; 00:09:29,000<br>One question that you may be wondering is, do we build one tree or do we build several trees?</p>
<p>91<br>00:09:29,000 –&gt; 00:09:38,000<br>In my example, I showed A wanting to send to this set of destinations, B, C, X and E.</p>
<p>92<br>00:09:38,000 –&gt; 00:09:47,000<br>So I had a video conference and after A has spoken and sent packets to everybody else, what if it’s B’s turn to send?</p>
<p>93<br>00:09:47,000 –&gt; 00:09:52,000<br>What is the tree, the multicast tree, that packets from B should follow?</p>
<p>94<br>00:09:52,000 –&gt; 00:09:59,000<br>So going from B back to A again, they would follow the same way, B to C and B to X.</p>
<p>95<br>00:09:59,000 –&gt; 00:10:03,000<br>But going from B to E, it would seem more likely that the packets will flow this way.</p>
<p>96<br>00:10:03,000 –&gt; 00:10:10,000<br>In other words, the tree is specific to a source. The shortest path tree is specific to a source.</p>
<p>97<br>00:10:10,000 –&gt; 00:10:20,000<br>And that should be clear from my previous example of the reverse path broadcast in which the packets are going to follow the shortest path spanning tree in the opposite direction.</p>
<p>98<br>00:10:20,000 –&gt; 00:10:30,000<br>And so given that there will be a shortest path spanning tree from every source and to every destination, it’s not surprising that the packets will take a different path.</p>
<p>99<br>00:10:30,000 –&gt; 00:10:35,000<br>So ideally, we would build a separate tree for every sender, a source specific tree.</p>
<p>100<br>00:10:35,000 –&gt; 00:10:39,000<br>So they’re all packets follow the shortest cost spanning tree to the end hosts.</p>
<p>101<br>00:10:39,000 –&gt; 00:10:54,000<br>But in communications where the multicast group of end hosts is very small, it might be easier instead of building a whole load of trees, one for a very source, to establish some rendezvous points.</p>
<p>102<br>00:10:54,000 –&gt; 00:11:05,000<br>And we’ll see an example of this later. So for example, we might elect R5 as a rendezvous through which all of the multicast packets are going to go.</p>
<p>103<br>00:11:05,000 –&gt; 00:11:15,000<br>So when everyone’s sending a multicast, they could send them to R5. And then R5 would build a shortest path spanning tree to everybody else within the group.</p>
<p>104<br>00:11:15,000 –&gt; 00:11:27,000<br>And there’s one shortest path spanning tree from R5, the rendezvous point to everybody, and that everybody uses the normal unicast routing method in order to reach R5.</p>
<p>105<br>00:11:27,000 –&gt; 00:11:35,000<br>So there’s really a design choice in practice as to whether we maintain one tree or one for every source.</p>
<p>106<br>00:11:35,000 –&gt; 00:11:45,000<br>So I’ve told you a little bit about some of the techniques and principles. Let me tell you a little bit about the practice how multicast is used in the internet today.</p>
<p>107<br>00:11:45,000 –&gt; 00:11:53,000<br>So one thing I haven’t mentioned so far is about addresses. There is a class of IPV4 addresses that are different from the unicast addresses.</p>
<p>108<br>00:11:53,000 –&gt; 00:12:05,000<br>There are sort of class, there are 16 bits, so there are two to the 16 different multicast addresses. And they don’t correspond to a particular location on the topology, like a unicast address does.</p>
<p>109<br>00:12:05,000 –&gt; 00:12:14,000<br>They refer to a group. So every recipient of packets within a group will receive packets with that same multicast address.</p>
<p>110<br>00:12:14,000 –&gt; 00:12:29,000<br>So it’s a little bit like an interaction. The router will look up on the label. And in fact, routers typically maintain an entry for each tuple of multicast address and source pair so that they can route packets on the source specific tree.</p>
<p>111<br>00:12:32,000 –&gt; 00:12:36,000<br>We also need a way for hosts to indicate their interest in joining a group.</p>
<p>112<br>00:12:36,000 –&gt; 00:12:46,000<br>One of the interesting things about multicast is that generally the source does not need to know who the packets are being delivered to. It’s the network, it’s the tree that figures that out.</p>
<p>113<br>00:12:46,000 –&gt; 00:12:59,000<br>So each of the leaves of the tree, each of the hosts, needs to indicate an interest in receiving packets. And it does this by using IGMP, the internet group management protocol, RFC3376.</p>
<p>114<br>00:13:00,000 –&gt; 00:13:06,000<br>So this is a protocol that runs between the host, between an end host, and it’s directly attached router.</p>
<p>115<br>00:13:07,000 –&gt; 00:13:24,000<br>The hosts periodically will ask to receive packets belonging to a particular multicast group. In fact, the routers will probe or will send out a request to all of the hosts connected to them and say, what multicast groups are you interested in?</p>
<p>116<br>00:13:24,000 –&gt; 00:13:31,000<br>And then the host will respond and we’ll say which groups they want to receive from.</p>
<p>117<br>00:13:31,000 –&gt; 00:13:40,000<br>And if they don’t receive any reply after a while, then the membership times out. In other words, it says, I will no longer deliver packets belonging to this multicast group if no one is interested in it.</p>
<p>118<br>00:13:41,000 –&gt; 00:13:52,000<br>This is an example of what’s called soft state. The state has only maintained. It isn’t explicitly removed. It will just time out if no one actually renews their interest in receiving it.</p>
<p>119<br>00:13:54,000 –&gt; 00:14:06,000<br>So let me tell you about multicast routing in the internet very briefly. The very first multicast routing protocol was called DVMRP. The distance vector multicast routing protocol described in RFC 1075.</p>
<p>120<br>00:14:07,000 –&gt; 00:14:23,000<br>It was first introduced in the 1980s. And it basically used the reverse path broadcast plus prune. So it was based on this observation, hence the distance vector name at the beginning. It’s based on the observation that the unicast routing protocol has already built the tree forest.</p>
<p>121<br>00:14:23,000 –&gt; 00:14:30,000<br>So it’s just going to use it in the reverse direction. An alternative is called protocol independent multicast or PIM.</p>
<p>122<br>00:14:31,000 –&gt; 00:14:41,000<br>And this recognizes two different modes of multicast, one called dense mode in which all of the routers or a very large number of the routers are expected to be involved in multicast.</p>
<p>123<br>00:14:42,000 –&gt; 00:14:48,000<br>In which case, RPP plus prune is fine because most of the routers will be involved and very few of them will need to prune.</p>
<p>124<br>00:14:48,000 –&gt; 00:14:55,000<br>So that uses DVMRP or something very similar to DVMRP and is described in RFC 3973.</p>
<p>125<br>00:14:56,000 –&gt; 00:15:06,000<br>An alternative way is called Spass mode PIM in which a relatively small number of the routers are expected to be involved in the multicast.</p>
<p>126<br>00:15:07,000 –&gt; 00:15:13,000<br>And therefore it will be very inefficient to do the RPP plus prune because there would be way too many prune messages in the network.</p>
<p>127<br>00:15:13,000 –&gt; 00:15:27,000<br>In this case, it explicitly builds rendezvous points through which the packets that are sent will join a small set of spanning trees from the rendezvous points to all of the destinations of a group.</p>
<p>128<br>00:15:28,000 –&gt; 00:15:36,000<br>And so there’s a lot of work went into how you pick these rendezvous points. It’s a fairly subtle problem in its own right.</p>
<p>129<br>00:15:36,000 –&gt; 00:15:49,000<br>So DVMRP and PIM, so really overall there are three widely used methods, protocols described in the three RFCs mentioned here.</p>
<p>130<br>00:15:50,000 –&gt; 00:16:01,000<br>So in practice multicast is used a little less than was originally expected. It was originally anticipated that it would be used for a very large amount of communication in the internet.</p>
<p>131<br>00:16:01,000 –&gt; 00:16:11,000<br>Because at the time that multicast was first conceived, it was still the case that the majority of communications in the world were for TV and radio that were broadcast medium.</p>
<p>132<br>00:16:12,000 –&gt; 00:16:15,000<br>And so it was anticipated that this would be a very common type of communication.</p>
<p>133<br>00:16:16,000 –&gt; 00:16:20,000<br>And in fact in practice this has turned out to be less true than was originally thought.</p>
<p>134<br>00:16:21,000 –&gt; 00:16:26,000<br>And it seems that over the last 20 or so years communication has become much more individualized.</p>
<p>135<br>00:16:26,000 –&gt; 00:16:31,000<br>We tend to ask for content that we specifically want to watch at a specific time.</p>
<p>136<br>00:16:32,000 –&gt; 00:16:43,000<br>There’s less interest in broadcast than there used to be except for events like sporting events, big political rallies or a rocket launching or something like that.</p>
<p>137<br>00:16:44,000 –&gt; 00:16:54,000<br>So this individualized time shifting that’s commonplace today has really reduced the demand for multicast in the network.</p>
<p>138<br>00:16:54,000 –&gt; 00:17:00,000<br>Also some of the earlier implementations were pretty inefficient like DVMRP and were found to have scaling problems.</p>
<p>139<br>00:17:01,000 –&gt; 00:17:06,000<br>And so it reduced some of the interest or the enthusiasm that people had for introducing multicast.</p>
<p>140<br>00:17:07,000 –&gt; 00:17:22,000<br>Today it is used for some broadcast IPTV dissemination and some applications do, there are an application layer specific multicast not using the network infrastructure but building their own overlay tree for themselves.</p>
<p>141<br>00:17:25,000 –&gt; 00:17:28,000<br>Multicast also raises some interesting questions.</p>
<p>142<br>00:17:29,000 –&gt; 00:17:39,000<br>And they’re really to do with the state that one would have to maintain in order to maintain reliable TCP-like communications within end host.</p>
<p>143<br>00:17:40,000 –&gt; 00:17:45,000<br>So for example imagine that a source is sending to hundreds or thousands or hundreds of thousands of destinations in a group.</p>
<p>144<br>00:17:46,000 –&gt; 00:17:53,000<br>If it wanted that communication to be reliable in which it was maintaining a keeping track of which packets had been reliable.</p>
<p>145<br>00:17:54,000 –&gt; 00:17:59,000<br>And then we received at which destinations this would be a horrendous task for a single source to manage.</p>
<p>146<br>00:18:00,000 –&gt; 00:18:09,000<br>And in fact anything that requires state like flow control or supporting different rates to a different end users, not clear how to do that either or how to make it secure.</p>
<p>147<br>00:18:10,000 –&gt; 00:18:15,000<br>All of these are quite big problems. There’s been lots of interest from a research point of view.</p>
<p>148<br>00:18:16,000 –&gt; 00:18:19,000<br>But generally speaking they’re not considered to be good solutions to these.</p>
<p>149<br>00:18:19,000 –&gt; 00:18:24,000<br>So generally multicast is used for delivering data that is primarily in one direction.</p>
<p>150<br>00:18:25,000 –&gt; 00:18:32,000<br>For example like TV in which that data is being moved from a source without modification to a set of end hosts.</p>
<p>151<br>00:18:33,000 –&gt; 00:18:35,000<br>And that’s the end of the video on multicast.</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>CS144 NetworkP906 6Routing</div>
      <div>http://example.com/2025/10/25/CS144-networkP906-6Routing/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>John Doe</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2025年10月25日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/10/25/CS144-networkP91-8abyteorder/" title="CS144 NetworkP91 8abyteorder">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">CS144 NetworkP91 8abyteorder</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/10/25/CS144-networkP926-8IPv6/" title="CS144 NetworkP926 8IPv6">
                        <span class="hidden-mobile">CS144 NetworkP926 8IPv6</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
