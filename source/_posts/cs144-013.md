---
title: 计算机网络 013 Longest Prefix Match
date: 2025-10-19 10:00:12
---


发言人   00:01
Internet routers can have many links, so they have many options for which direction to forward receive packet to select which link to forward A packet over, routers today typically use an algorithm called longest prefix match. 
互联网路由器可以有许多链接，因此它们有许多选项可以选择哪个方向转发接收数据包，并选择哪个链接转发数据包，今天的路由器通常使用称为最长前缀匹配的算法。

发言人   00:14
In this example, a client wants to open a TCP connection to a server on port 80, the typical port for web servers. The packets to set up the connection and transfer data take many hops between the client and server. On each hop of each packet, a router decides which link to forward the packet over. How does a router make this decision? It does so through something called a forwarding table shown here on the right. 
在本例中，客户端希望在端口80上打开到服务器的TCP连接，该端口是web服务器的典型端口。用于建立连接和传输数据的数据包在客户端和服务器之间需要多个跃点。在每个数据包的每个跃点上，路由器决定将数据包转发到哪个链路。路由器是如何做出这个决定的？它通过右侧所示的转发表来实现。



发言人   00:36
A forwarding table consists of a set of partial IP addresses. The Xs show that the addresses are partial. The Xs represent wildcards. For example, the second entry reading 171.33 XX means any IP address whose first byte is 171 and whose second byte is 33. This particular entry, for example, includes 1 1 7 1 dot 3 3 dot 5 dot 2 4 5 as well as 171 dot 3 3 dot 1 1. 
转发表由一组部分IP地址组成。Xs显示地址是部分的。Xs代表通配符。例如，读取171.33 XX的第二项表示任何第一个字节为171，第二个字节为33的IP地址。例如，这个特定的条目包括1 1 7 1点3点5点2 4 5以及171点3 3点1 1。

发言人   01:00
When a packet arrives, the router checks which forwarding table best matches the packet and forwards the packet along the link associated with that forwarding table entry. By best I mean most specific. The default route is effectively all wildcards. It matches any IP address if when a pack arrives, there isn't a more specific route than the default route, the router will just use the default one. Longest prefix match. Our Lpm is the algorithm. 
当数据包到达时，路由器检查哪个转发表与该数据包最匹配，并沿着与该转发表条目相关的链接转发数据包。我的意思是最具体的。默认路由实际上是所有通配符。如果包到达时没有比默认路由更具体的路由，则路由器将仅使用默认路由，则匹配任何IP地址。最长的前缀匹配。我们的Lpm是算法。


发言人   01:24
IP router is used to decide how to afford a packet. Every routers has a forwarding table. Entries in this forwarding table have two parts, a cider entry describing a block of addresses and the next top front packets that match that cider entry and addressers might belong to multiple cider entries. For example, in this writing table on the right, there are two entries, one for the default route, which has a prefix of length 0 and 1 for 171 dot 3 three point 0.0 slash 16. By default, all packets will match the top entry and go over link 1. However, the first 16 b or two octets of the packet destination address matches 1 171 33. The router will send it over link 5. 
IP路由器用于决定如何提供数据包。每个路由器都有一个转发表。这个转发表中的条目有两部分，一部分是描述一个地址块的cider条目，后面匹配该cider条目和地址的顶部数据包可能属于多个cider条目。例如，在右侧的这个写字台中有两个条目，一个用于默认路由，其前缀长度为0和1，表示171点3的三点0.0斜杠16。默认情况下，所有数据包都将匹配顶部的条目并经过链接1。但是，数据包目标地址的前16 b或两个八位字节匹配1，171 33。路由器将通过链接5发送它。

发言人   02:03
This is because a 16 b prefix is a longer prefix than 0 b, it's more specific, so let's go back to our earlier example where we should forwarding table with x's denoting wildcards. Here's the router and its forwarding table. If we represent this forwarding table as cider entries, this is what it looks like, since in this simple example, all the prefixes are in terms of bytes, all of the prefixes have length 0, 8, 16, or 24 b. 
这是因为16 b前缀是比0 b更长的前缀，它更具体，所以让我们回到之前的例子，我们应该用x表示通配符转发表。这是路由器及其转发表。如果我们将这个转发表表示为苹果酒条目，这就是它的样子，因为在这个简单的例子中，所有的前缀都是字节，所有前缀的长度都是0、8、16或24 b。

