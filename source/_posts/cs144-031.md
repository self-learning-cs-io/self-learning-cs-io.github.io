---
title: 计算机网络 031 Principles What is packet switching
date: 2025-10-19 10:00:30
---

发言人   00:01
In this video I'm going to tell you about what packet switching is and why packet switching is used in the internet. Packet switching was first described by Paul Barron in the early 1960s. It describes the way in which packets of information erod 1 by one across the internet to their destination, just like letters are delivered by the post office. Packet switching is really important for us to understand because when we choose to use packet switching, it dictates many of the properties of the network. Today I'm going to describe what packet switching is and why it was chosen for the internet. 
在这个视频中，我将告诉你什么是分组交换，以及为什么在互联网中使用分组交换。分组交换最早是由保罗·巴罗在20世纪60年代早期描述的。它描述了信息包通过互联网一个接一个地传输到目的地的方式，就像信件通过邮局投递一样。分组交换对我们来说非常重要，因为当我们选择使用分组交换时，它决定了网络的许多属性。今天我将描述什么是分组交换，以及为什么选择它用于互联网。


发言人   00:36
But first, to set some context I'm going to tell you about a predecessor of packet switching that was called circuit switching. And we're all very familiar with circuit switching. It's what's used in the telephone network. So the most common use of circuit switching is in the telephone, the traditional wired telephone network. 
但首先，为了设置一些上下文，我将告诉你关于分组交换的前身，称为电路交换。我们都非常熟悉电路交换。这是电话网络中使用的东西。因此，电路交换最常见的用途是在电话中，即传统的有线电话网络中。


发言人   00:58
And we're going to walk through what happens when we place a phone call from the phone on the left to the one on the right. 
我们将介绍当我们从左边的电话打给右边的电话时会发生什么。

发言人   01:06
Now in the picture I've got here, it shows the telephones being connected by a dedicated wire. And that wouldn't make for a very interesting telephone system. We can only talk to one other person. But so in practice, the telephones are connected together through a dedicated wire down to a switching center. So in the early days of telephony back in the 1880s or so, the dedicated wire went to a switchboard operator. And the switchboard operator was a room full of people who would take a dedicated wire from the input and connect it to the dedicated wire to the phone that you are connecting to. So it was all manually connected. And the main point here is that the wire is dedicated for the phone conversation from the start to the end of the phone call. 
现在在我这里的图片中，它显示了电话正在通过专用电线连接。这并不构成一个非常有趣的电话系统。我们只能和另一个人交谈。但实际上，电话通过专用线路连接到交换中心。所以在18 80年代左右的电话早期，专用线路连接到交换机操作员。总机操作员是一个挤满了人的房间，他们会从输入中取出一根专用电线，并将其连接到您正在连接的电话的专用电线上。所以全部都是手动连接的。这里的主要观点是，电线是专用于电话交谈的，从电话的开始到结束。


发言人   01:58
Nowadays, of course, we don't have room full of switchboard operators. And these, instead, we use automatic circuit switches that set up the circuit for us from one phone to our friend's phone at the other end. So it helps to think of a phone call having three phases. 
当然，现在我们没有满是总机操作员的房间。而这些，我们使用自动电路开关，为我们设置从一个电话到另一端的朋友电话的电路。因此，将电话分为三个阶段有所帮助。

发言人   02:17
First, we pick up the handset and dial the number. And dialing the number is saying, where do we want to be connected to. And this creates a dedicated circuit from one end to the other. So that dedicated circuit is going to go through all of the circuits along the way. And the system has told each of the circuits to connect an incoming wire to an outcoming wire or an incoming circuit to an outcoming circuit. So each switch is going to maintain the state to map that incoming circuit to the correct outgoing circuit. 
首先，我们拿起听筒并拨打号码。并且拨打号码是说，我们希望连接到哪里。这将创建一个从一端到另一端的专用电路。这样专用电路将穿过所有电路。并且系统已通知每个电路将一个引入线连接到一个输出线或一个引入电路连接到一个输出电路。因此，每个交换机将保持状态，以将传入电路映射到正确的输出电路。

发言人   02:50
And then in the second phase, we talk in a digital phone system. Like most phone systems are today, voice is sampled and digitized at the first switch, and then it send over the dedicated circuit as a typically a 64 kbps channel for voice. So our phone conversation has a dedicated circuit or channel all the way along the path. And the circuit is not shared with anyone else. And then finally, when we hang up, the circuit has to be removed and any state and the switches along the path has to be removed as well. 
然后在第二阶段，我们在数字电话系统中交谈。像今天的大多数电话系统一样，语音在第一次交换机上被采样和数字化，然后通过专用电路作为典型的64 kbps的语音信道发送。因此，我们的电话交谈在沿途都有专用电路或频道。并且电路不与其他人共享。最后，当我们挂断电话时，必须移除电路，路径上的任何状态和开关也必须移除。


发言人   03:28
So in practice, between the switches, there are trunk lanes, which are really, really fast. In other words, they have a very high data rate. Even the slow ones run at 2.5 gigabits per second, and the fastest ones per day run at 40 or even 100 Gb per second. Sometimes you'll hear people call these big trunk lines, big fat pipes because of the volume of data they can send. But actually, these big fat pipes are really tiny, skinny little optical fibers, thinner than one over your head. Many thousands of phone calls can share that same trunk line between cities, each in its own dedicated circuit. The key thing here to remember is every phone call has its own dedicated 64 kbps circuit that it doesn't have to share with anybody else. 
所以在实践中，在开关之间，有干线通道，非常非常快。换句话说，它们具有非常高的数据速率。即使是缓慢的也以每秒2.5千兆比特的速度运行，最快的每天也以每秒40千兆比特甚至100千兆比特的速度运行。有时你会听到人们称这些大的干线，大的胖管道，因为他们可以发送大量的数据。但实际上，这些大粗大的管道非常小，纤细小的光纤，比头顶上的光纤还要细。成千上万的电话可以在城市之间共享同一条干线，每个城市都有自己的专用线路。这里要记住的关键是，每个电话都有自己的专用64 kbps电路，不必与其他人共享。


发言人   04:20
So in summary, we can think of circuit switching as having the following characteristics. Each call has its own private, guaranteed isolated data rate from end to end. Second, the call has three phases, establish, communicate, and close, and third, originally a circuit was an end to end physical wire, but nowadays it's made up of a virtual private wire. It's going to share that wire with others, but it has its own dedicated circuit within that wire. 
总之，我们可以认为电路交换具有以下特征。每个呼叫都有自己的私有的、有保证的端到端隔离数据速率。其次，呼叫有三个阶段，建立、通信和关闭，第三，最初的电路是端到端的物理线路，但现在它是由虚拟专用线路组成的。它将与其他人共享电线，但它在电线中有自己的专用电路。

发言人   04:52
There are a few problems with socket switching. Clearly it's worked very well for the phone system, but when we're thinking about using circuit switching for the internet or any computer communications, there are a few shortcomings that that we need to consider. So I'm going to go through three main problems. 
套接字切换存在一些问题。显然，它在电话系统中工作得非常好，但是当我们考虑在互联网或任何计算机通信中使用电路交换时，我们需要考虑一些缺点。所以我将经历三个主要问题。

发言人   05:10
The first one is it's inefficient computers. When computers communicate, they we tend to be very easy, we tend to send data in bursts of maybe a few seconds, a few packets, maybe even a few minutes, depending on the application that we're running. For example, if I'm typing over an SSH connection, then I'm going to have characters that I'm going to send every now and again, sometimes a flurry of characters as I type a word, and then long periods of violence in between or if I'm reading a sequence of web pages, I might have a burst as I fill up one page, a burst as I fill up the figures to populate that page, and then a little period of pauses while I read those web pages. So it tends to be very bursty and of course during those times of silence when I'm not doing anything, there's no activity I've got this dedicated circuit which nobody else can use. So it's very inefficient, very inefficient use of the capacity of the network as a whole. 
第一个是它的计算机效率低下。当计算机通信时，它们往往非常容易，我们倾向于在几秒钟、几个数据包甚至几分钟内发送数据，具体取决于我们运行的应用程序。例如，如果我在SSH连接上打字，那么我将会不时发送一些字符，有时在我键入单词时会发送一些字符，然后在这之间进行长时间的暴力，或者如果我正在阅读一系列网页，当我填写one page时，我可能会爆发一次，当我填写数字以填充该页面时，可能会爆发一次，然后在我阅读这些网页时会有一些停顿。所以它往往非常突发，当然在我什么都不做的沉默时期，没有任何活动，我有这个专用的电路，没有其他人可以使用。所以它的效率非常低，整个网络的容量利用效率非常低。



发言人   06:13
The second thing is computers tend to have very diverse applications that need very different rates. Comms communicate at many, many different rates. So a web server might be streaming video at, say, one, 5, or even 6 Mb per second. But if you compare that with me typing one character every second, there's a huge difference in the rates that the network needs to support. So if we pick a fixed rate circuit for the video, and then I use it for typing, it'll be barely used or vice versa, then I wouldn't even be able to stream the video. So a fixed rate circuit really isn't much use at all. 
第二件事是，计算机往往具有非常多样化的应用程序，需要非常不同的速率。通信以许多不同的速率进行通信。因此，一个网络服务器可能会以每秒1、5甚至6 Mb的速度流式传输视频。但如果你将其与我每秒输入一个字符进行比较，则网络需要支持的速率存在巨大差异。所以如果我们为视频选择一个固定速率电路，然后我用它来打字，它几乎不会被使用，反之亦然，那么我甚至无法流式传输视频。因此，固定速率电路实际上根本没有多大用处。

发言人   06:52
The third one, the third problem with circuit switching is all of the state that we need to maintain. We need to maintain some state for every phone call that's going on. Every time we've established a core, we need to set up the circuit mapping from the eingreif the to the egress of every switch along the way. If a circuit fails or a switch fails or a link fails, we need to go in and change all of that state in order to reroute the reroute the calls. So we have to manage it. And then at the end, we need to remember to take the state out. If anything fails, then we may find that the state becomes inconsistent, and then we have a problem. So state management in circuit switches is considered a problem. 
第三个问题，电路交换的第三个问题是我们需要维护的所有状态。我们需要为正在进行的每个电话保持一些状态。每次我们建立核心时，我们都需要建立从eingreif到沿途每个交换机出口的电路映射。如果电路故障、交换机故障或链路故障，我们需要进入并更改所有状态，以便重新路由呼叫。所以我们必须管理它。然后在最后，我们需要记住将状态取出。如果任何事情失败了，那么我们可能会发现状态变得不一致，然后我们就有问题了。因此，电路交换机的状态管理被认为是一个问题。

发言人   07:29
And if we had thousands or hundreds of thousands of communications going on at the same time, that's just a lot of work that has to be done. 
如果我们同时进行成千上万次的通信，那就需要做很多工作。


发言人   07:38
So let's take a look at the packet switching in contrast to circuit switching. So again, we're going to look at 2 n systems communicating in this. In this case, we're going to look at this laptop on the left A, and it's going to be talking to this server on the right b? In practice, these, of course, could be anywhere, anywhere in the internet to in packet switching. 
那么让我们来看看分组交换与电路交换的对比。所以，我们将再次查看在此通信的两个n个系统。在这种情况下，我们要看看左边的这台笔记本电脑，它将与右边的这台服务器进行通信。在实践中，这些当然可以在任何地方，在互联网上的任何地方，在分组交换中。


发言人   08:04
There's no dedicated circuit to carry out data. Instead, we just send when we're ready. And anytime we want, we send a block of data by adding a header to it. That's what we call the packet. And the header contains the address of where the packet is going. Just like an envelope tells us the post office where to send the letter. Packet switch network consists of the end hosts, the links and packet switches. 
没有专门的电路来执行数据。相反，我们只是在准备好时发送。每当我们需要时，我们都会通过添加一个标头来发送一个数据块。这就是我们所说的包裹。并且标头包含数据包的去向地址。就像信封告诉我们邮局把信寄到哪里一样。分组交换网络由终端主机、链路和分组交换机组成。


发言人   08:36
When we send a packet hits routed one hop at a time from the source. This case the laptop, A all the way through to the destination B, if you look at the packet, it has the data in it and it also has the address B of where it's going to. We'll see later that packets are a little bit more complicated than this, but this is the bare information, the minimum information than it needs, the data we want to get to be, and then the address B of where it's going to. So when we send the packet, it's going to be routed hop by hop from the source to the destination. 
当我们发送数据包时，数据包会从来源每次路由一个跃点。这种情况下笔记本电脑，一直连接到目的地B，如果你看一下数据包，它里面有数据，还有它要去的地址B。我们稍后会看到，数据包比这稍微复杂一些，但这是裸信息，比它所需的最小信息，我们想要的数据，然后是它要去哪里的地址B。所以当我们发送数据包时，它将从源到目标逐跳路由。

发言人   09:16
Each packet switch along the way is going to look up the address in a forwarding table. So it keeps a local forwarding table in all of the packet switches. 
沿途的每个分组交换机都将在转发表中查找地址。因此它在所有的数据包交换机中保持本地转发表。

发言人   09:24
And here I've got a forwarding table saying if we see the address B, then we're going to send it to on the next top to S 2. And this is S 2 over over here. Okay? So once this switch S 1 sees this packet, it's going to look it up in its table and send it along to switch S 2. And this is it going along its way. Switch S 2 will have its own table. And of course, that table is going to be different from S 1 s because it's going to have a different set of next hops for each of the addresses that it sees. So then it's going to send it along its way, this time to S 4, and then eventually to the correct destination. 
这里我有一个转发表，上面写着如果我们看到地址B，那么我们将把它发送到下一个顶部的s2。这里是S 2。好吗？因此，一旦交换机S 1看到这个数据包，它将在其表中查找并将其发送到交换机S 2。这就是它正在前进的方向。开关S 2将拥有自己的表。当然，该表将与S1不同，因为对于它看到的每个地址，它将有一组不同的下一跳。那么它将沿着它的方式发送，这次是到s4，然后最终到达正确的目的地。

发言人   10:10
So in the internet, there's lots of different types of packet switch. Some of them are called routers because they deal with addresses that are internet addresses. And they may include little routers that we have in our desks, on our desks at home, or huge routers that are in big wiring closets and big switching centers. But we call those routers. There are also things called Ethernet switches. And we're going to look at the difference between different types of packet switch in a later lecture. 
因此，在互联网中，有许多不同类型的数据包交换。其中一些被称为路由器，因为它们处理的地址是互联网地址。它们可能包括我们家里桌子上的小路由器，或者在大布线间和大交换中心里的大路由器。但我们称之为路由器。还有一些东西叫做以太网交换机。我们将在后面的讲座中探讨不同类型的数据包交换之间的区别。


发言人   10:42
I showed you one packet. And of course, at any instance, there's going to be many packets flowing across the internet, millions and millions of packets flowing in all sorts of different. And they're all being routed hop by hop, 1 at a time by the packet switches along the path. So there will be many flows of communication going in all sorts of directions at the same time. So these packet switches have a lot of work to do. And remember, they're routing each packet one at a time by picking the next hop that it goes to and sending it on its way. 
我给你看了一包。当然，在任何情况下，都会有许多数据包在互联网上流动，数百万的数据包以各种不同的方式流动。并且它们都被沿着路径的分组交换机逐跳地路由，一次路由一个。因此，将会有许多沟通流程同时在各种方向上进行。所以这些分组交换机有很多工作要做。记住，他们通过选择数据包到达的下一个跃点并将其发送来逐一路由每个数据包。


发言人   11:16
We're going to take a quick look inside packet switches at some of the relevant features. So we already told you that packet switches have a forwarding table to tell it where the packet goes next. They also have to have buffers. 
我们将快速了解数据包交换机的一些相关功能。所以我们已经告诉过您，数据包交换机有一个转发表来告诉它数据包下一步去向。他们也必须有缓冲。

发言人   11:29
So packet switches have buffers, and let me explain why that is. So in the middle here, we've got a packet switch. And this packet switch is going to be receiving these two packets that I've got here and here. 
所以分组交换机有缓冲区，让我解释一下为什么会这样。在这里的中间，我们有一个分组交换机。这个数据包交换机将接收我在这里和这里得到的这两个数据包。

发言人   11:41
So we're going to look at what happens as these packets go through the packet switch. If they both arrive at the same time. And let's say they're arriving at the full line rate of the outgoing link. Then the packet switch has to hold one of them while it sends the other can't send them both at the same time. So it's going to send one at a time. And because it might have many incoming links, the packet switch has to have a buffer to hold perhaps many, many packets. And we're going to see that these packets, these buffers, can be quite large in practice. So the buffer's hole packets, when two or more packets arrive at the same time, and particularly during periods of congestion when there's lots and lots of packets coming in, and all of these input links all trying to get to the same output, it may actually have quite big buffers to hold packets during those times of congestion. 
所以我们将看看当这些数据包通过数据包交换机时会发生什么。如果他们同时到达。假设他们以出站链接的全线路速率到达。那么分组交换机必须持有其中一个，而另一个则不能同时发送它们。所以它将一次发送一个。而且因为它可能有许多传入链接，所以分组交换机必须有一个缓冲区来容纳可能很多很多的数据包。我们将看到这些数据包，这些缓冲区，在实践中可能会非常大。因此，缓冲区的空洞数据包，当两个或多个数据包同时到达时，特别是在拥塞期间，有很多很多数据包进来，所有这些输入链路都试图到达相同的输出，在拥塞期间，它可能实际上有相当大的缓冲区来容纳数据包。


发言人   12:39
So in summary, packets are routed individually by looking up the address in the router's local forwarding table. All packets shared a full capacity of a link. 
总之，数据包是通过在路由器的本地转发表中查找地址来单独路由的。所有数据包都共享链路的全部容量。

发言人   12:51
And third, the routers maintain no per per communication state. And this is really quite key in a circuit switch. Remember, we need to maintain state associated with every circuit along the every every circuit we're maintaining here, we maintain none. We just maintain the forwarding table. And then there's no per communication, no per packet, or no per flow state associated with that communication. 
第三，路由器维护 “没有每个每个通信状态”。这在电路开关中确实非常关键。记住，我们需要维护与每个电路相关的状态，在我们维护的每个电路中，我们不维护任何状态。我们只维护转发表。然后没有与该通信相关联的每个通信、每个数据包或每个流状态。


发言人   13:19
So why does the internet use packet switching? Probably pretty obvious by now, but I really wanted to spel that out. 
那么，为什么互联网使用分组交换呢？现在可能已经很明显了，但我真的很想把它说出来。


发言人   13:25
There were three original reasons too that I've got listed here that the internet used packet switching. The first two were very obvious. Income come from what I've just described. The first one is packet switching allows us to use expensive links efficiently. So efficient use of expensive links, links were assumed to be expensive and scarce. The first links that interconnected the packet switches across the backbone of the internet were running at a few kilobits per second. So they were expensive and everybody knew that they would be. There would be a scarce resort resource. 
我在这里列出了三个最初的原因，即互联网使用分组交换。前两个非常明显。收入来自我刚才描述的收入。第一个是分组交换允许我们有效地使用昂贵的链路。如此有效地使用昂贵的链接，链接被认为是昂贵和稀缺的。互联网骨干网上的数据包交换机之间的第一批连接以每秒几千比特的速度运行。所以它们很贵，每个人都知道它们会很贵。这将是一种稀缺的度假资源。

发言人   14:03
Packet switching allows many, many bursty flows to share that those same links very efficiently, because at any one instant, a packet can use the entire link, but it can be immediately followed by another packet using the entire link belonging to a different communication. 
分组交换允许许多突发流非常有效地共享相同的链路，因为在任何一个瞬间，一个数据包都可以使用整个链路，但它可以立即被另一个数据包跟随，使用属于不同通信的整个链路。

发言人   14:20
There was a famous textbook by beziers, and Gallagher said circuit switching is rarely used for data networks because of very inefficient use of the links. So the second big reason for using packet switching was it's widely felt that the packet switching allows for more resilient networks, networks that are resilient to the failure of links and routers. And the reason for this is that because each packet is individually routed along the path, if something happens, if something breaks, a link breaks, or a router breaks, then we can because we have no state in all of the switches for this particular flow, we can simply send the packet on a different path, we can send it over a different link to a different router, and it will find its way eventually. So for this reason, Tannenbaum and another famous textbook said for high reliability, the internet was to be a datagram subnet. So if some lines and routers were destroyed, messages could easily be rerouted, and the third big reason that the internet used packet switching was the internet was originally designed as an interconnection of existing networks. And at that time, pretty much all widely used communication networks, all computer networks were packet switched. And so if the internet was to interconnect all of those existing networks, then it too needed to be packet switched as well. 
贝齐尔有一本著名的教科书，加拉格尔说，电路交换很少用于数据网络，因为链路的使用效率非常低。因此，使用分组交换的第二个主要原因是人们普遍认为分组交换可以实现更具弹性的网络，这种网络可以抵御链路和路由器的故障。其原因是由于每个数据包都沿着路径单独路由，如果发生某些事情，如果某些事情中断，链接中断或路由器中断，那么我们可以因为我们在所有交换机中没有针对此特定流的状态，我们可以简单地将数据包发送到不同的路径，我们可以通过不同的链接将其发送到不同的路由器，它最终会找到自己的路。因此，出于这个原因，Tannenbaum和另一本著名教科书说，为了高可靠性，互联网将成为数据报子网。因此，如果某些线路和路由器被破坏，消息可以很容易地重新路由，互联网使用分组交换的第三个主要原因是互联网最初被设计为现有网络的互连。在那个时候，几乎所有广泛使用的通信网络，所有计算机网络都是分组交换的。因此，如果互联网要将所有现有网络互连，那么它也需要进行分组交换。

发言人   15:49
Okay, this is the end of the first video about packet switching. By now you should be able to answer these three questions very easily. In the next few videos, we're going to learn more about packet switching, some basic definitions, some ways to model packet switching, and some properties of packet switching have been developed over the years. See soon. 
好的，这是关于数据包交换的第一个视频的结尾。现在你应该能够很容易地回答这三个问题了。在接下来的几个视频中，我们将学习更多关于分组交换的知识，一些基本定义，一些建模方法，以及分组交换的一些属性。很快就看到了。